/* Core Project Widget Container (renamed from info-box to project-widget) */
.project-widget {
    background: var(--infobox-bg, linear-gradient(135deg, 
        rgba(32, 36, 46, 0.95) 0%, 
        rgba(24, 28, 38, 0.85) 100%));
    border: var(--infobox-border, 1px solid rgba(255, 255, 255, 0.15));
    box-shadow: var(--infobox-shadow, 
        0 20px 40px rgba(0, 0, 0, 0.4),
        0 8px 25px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1));
    border-radius: var(--border-radius-lg);
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
    transform: translateY(0);
    grid-column: span 4; /* default medium size */
    min-height: 120px;
    contain: layout style; /* avoid overlap */
    isolation: isolate; /* new stacking context */
}

/* Sizes */
.project-widget.size-small { grid-column: span 3; min-height: 100px; }
.project-widget.size-medium { grid-column: span 4; min-height: 120px; }
.project-widget.size-large { grid-column: span 6; min-height: 140px; }
.project-widget.size-xl { grid-column: span 8; min-height: 160px; }

/* Expanded state */
.project-widget.expanded {
    position: relative;
    z-index: 100;
    grid-column: 1 / -1;
    grid-row: auto;
    display: block;
    width: 100%;
    margin: 1.5rem 0;
    padding: 0;
    transform: translateY(-5px);
    box-shadow: var(--infobox-expanded-shadow, 
        0 25px 50px rgba(0, 0, 0, 0.5),
        0 15px 35px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.15),
        0 0 0 1px rgba(52, 152, 219, 0.2));
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    min-height: auto;
    max-height: none;
    overflow: visible;
    border-color: var(--infobox-expanded-border-color, rgba(52, 152, 219, 0.3));
    background: var(--infobox-expanded-bg, linear-gradient(135deg, 
        rgba(32, 36, 46, 0.98) 0%, 
        rgba(24, 28, 38, 0.95) 100%));
}

.project-widget.expanded .project-widget-header,
.project-widget.expanded .project-widget-content { width: 100%; box-sizing: border-box; }

@supports not (grid-template-columns: subgrid) {
  .project-widget.expanded { display: block; }
}

.project-widget:not(.expanded) {
    transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    contain: layout style;
    overflow: hidden;
    max-height: 400px;
}

/* Opening / closing animations */
.project-widget.expanding { animation: expandProjectWidget 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; z-index: 150; }
.project-widget.collapsing { animation: collapseProjectWidget 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; z-index: 50; }

@keyframes expandProjectWidget {
  0% { grid-column: var(--original-span); margin:0; padding:0; z-index:1; transform:translateY(0) scale(1); box-shadow: var(--infobox-shadow, 0 20px 40px rgba(0,0,0,0.4), 0 8px 25px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)); }
  30% { transform:translateY(-8px) scale(1.02); box-shadow: 0 25px 45px rgba(0,0,0,0.45), 0 12px 30px rgba(52,152,219,0.1), inset 0 1px 0 rgba(255,255,255,0.12); }
  100% { grid-column:1 / -1; margin:1.5rem 0; padding:0; z-index:100; transform:translateY(-5px) scale(1); box-shadow: var(--infobox-expanded-shadow, 0 25px 50px rgba(0,0,0,0.5), 0 15px 35px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.15), 0 0 0 1px rgba(52,152,219,0.2)); }
}
@keyframes collapseProjectWidget {
  0% { grid-column:1 / -1; margin:1.5rem 0; padding:0; z-index:100; transform:translateY(-5px) scale(1); box-shadow: var(--infobox-expanded-shadow, 0 25px 50px rgba(0,0,0,0.5), 0 15px 35px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.15), 0 0 0 1px rgba(52,152,219,0.2)); }
  50% { transform:translateY(-3px) scale(0.98); box-shadow: 0 20px 40px rgba(0,0,0,0.4), 0 10px 25px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.12); }
  100% { grid-column:var(--original-span); margin:0; padding:0; z-index:1; transform:translateY(0) scale(1); box-shadow: var(--infobox-shadow, 0 20px 40px rgba(0,0,0,0.4), 0 8px 25px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)); }
}

.project-widget::before { content:''; position:absolute; top:0; left:0; right:0; height:3px; background: var(--infobox-top-bar-gradient, linear-gradient(90deg, var(--primary-blue) 0%, var(--primary-teal) 50%, var(--primary-blue) 100%)); background-size:200% 100%; animation: shimmer 3s ease-in-out infinite; border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0; opacity:0; transition: opacity 0.3s ease; }
@keyframes shimmer { 0%,100% { background-position:-200% 0; } 50% { background-position:200% 0; } }
.project-widget:hover::before { opacity:1; }

.project-widget:hover { transform: translateY(-8px) scale(1.02); border-color: var(--infobox-hover-border, rgba(52,152,219,0.4)); box-shadow: var(--infobox-hover-shadow, 0 30px 60px rgba(0,0,0,0.5), 0 15px 35px rgba(52,152,219,0.2), 0 0 30px rgba(52,152,219,0.1), inset 0 1px 0 rgba(255,255,255,0.15)); }

.project-widget-header { display:flex; align-items:center; gap:1.2rem; padding:2rem; cursor:pointer; transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1); position:relative; background: var(--infobox-header-bg, linear-gradient(135deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%)); }
.project-widget-header::after { content:''; position:absolute; bottom:0; left:2rem; right:2rem; height:1px; background: var(--infobox-header-divider, linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%)); opacity:0; transition: opacity 0.3s ease; }
.project-widget.expanded .project-widget-header::after { opacity:1; }
.project-widget-header:hover { background: var(--infobox-header-hover-bg, linear-gradient(135deg, rgba(52,152,219,0.08) 0%, rgba(255,255,255,0.05) 100%)); transform: translateX(4px); }

.project-widget-header-content { flex:1; min-width:0; }

.project-widget-icon { width:3rem; height:3rem; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:1.4rem; color:var(--text-primary); position:relative; overflow:hidden; flex-shrink:0; transition: all 0.3s ease; box-shadow: 0 8px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.2); }
.project-widget-icon::before { content:''; position:absolute; inset:0; border-radius:50%; z-index:-1; transition: all 0.3s ease; }
.project-widget:hover .project-widget-icon { transform: scale(1.1) rotate(5deg); box-shadow: 0 12px 30px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.3); }
.project-widget-icon svg { width:1.4rem; height:1.4rem; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); }

.project-widget-title { color: var(--text-primary); font-size:1.25rem; font-weight: var(--font-weight-bold); margin:0 0 0.5rem 0; letter-spacing:-0.01em; text-shadow:0 2px 4px rgba(0,0,0,0.2); }
.project-widget-summary { color: var(--text-muted); font-size:0.9rem; font-weight:500; opacity:0.8; transition: opacity 0.3s ease; }
.project-widget:hover .project-widget-summary { opacity:1; color: var(--text-secondary); }

.project-widget-toggle { width:2rem; height:2rem; display:flex; align-items:center; justify-content:center; color: var(--text-muted); transition: all 0.3s cubic-bezier(0.165,0.84,0.44,1); flex-shrink:0; border-radius:50%; background: var(--infobox-toggle-bg, rgba(255,255,255,0.05)); backdrop-filter: blur(10px); }
.project-widget-toggle:hover { background: var(--infobox-toggle-bg-hover, rgba(52,152,219,0.2)); color: var(--primary-blue); transform: scale(1.1); }
.project-widget-toggle svg { width:1.1rem; height:1.1rem; transition: transform 0.4s cubic-bezier(0.165,0.84,0.44,1); filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)); }
.project-widget.expanded .project-widget-toggle svg { transform: rotate(180deg); color: var(--primary-blue); }

.project-widget-content { max-height:0; overflow:hidden; transition: all 0.5s cubic-bezier(0.165,0.84,0.44,1); padding:0 2rem; background: var(--infobox-content-bg, linear-gradient(180deg, rgba(255,255,255,0.01) 0%, rgba(255,255,255,0.02) 100%)); }
.project-widget.expanded .project-widget-content { max-height:1000px; padding:1.5rem 2rem 2.5rem 2rem; }

/* All widget styles migrated to .project-widget-* naming convention */
