<section class="projects-section">
    <div class="projects-header">
        <h2>{{ i18n "projects_title" | default (i18n "projects") }}</h2>
        <p class="projects-subtitle">{{ i18n "projects_subtitle" | default "Construire des applications utiles qui simplifient la vie." }}</p>
    </div>

    <!-- Navigation Tabs -->
    <div class="projects-tabs">
    <button class="tab-btn active" data-category="games">{{ i18n "games" | default "Jeux" }}</button>
    <button class="tab-btn" data-category="apps-web">{{ i18n "apps_web" | default "Apps/Web" }}</button>
    <button class="tab-btn" data-category="mods-tools">{{ i18n "mods_tools" | default "Mods & Tools" }}</button>
    </div>

    <!-- Technology Filter Badges -->
    <div class="tech-filters">
    <span class="tech-badge active" data-tech="all">{{ i18n "all" | default "Tous" }}</span>
        {{ range sort .Site.Data.technologies "order" }}
        {{ if .enabled }}
        <span class="tech-badge" data-tech="{{ .name }}" style="--tech-color: {{ .color | default "#666" }}">{{ partial "tech-icon.html" . }} {{ .name }}</span>
        {{ end }}
        {{ end }}
    </div>

    <!-- Description Text -->
    <div class="projects-description">
    <p id="section-description">{{ i18n "projects_description" | default "DÃ©couvrez mes projets organisÃ©s par secteur d'expertise : jeux vidÃ©o, applications web et outils de dÃ©veloppement." }}</p>
    </div>

    <!-- Projects Grid -->
    <div class="projects-grid" id="projects-grid">
        <!-- Games Projects -->
        {{ range where .Site.RegularPages "Section" "projects" }}
        {{ if and .Params.featured (eq .Params.sector "games") }}
        <div class="ps5-project-tile" 
             data-project-id="{{ .File.BaseFileName }}" 
             data-background-image="{{ .Params.background_image | default .Params.image }}"
             data-sector="games"
             data-category="games" 
             data-technologies='{{ delimit .Params.technologies "," }}'>
            
            <!-- Image principale de la tuile -->
            <div class="ps5-tile-image">
                <img src="{{ .Params.image | default "/images/placeholder-project.jpg" }}" alt="{{ .Title }}" onerror="this.src='/images/placeholder-project.jpg'">
                <div class="ps5-tile-overlay"></div>
            </div>
            
            <!-- Badge featured -->
            {{ if .Params.featured }}
            <div class="ps5-tile-badge">â˜…</div>
            {{ end }}
            
            <!-- IcÃ´ne secteur -->
            <div class="ps5-tile-sector-icon">ðŸŽ®</div>
            
            <!-- Contenu de base -->
            <div class="ps5-tile-content">
                <h3 class="ps5-tile-title">{{ .Title }}</h3>
                <p class="ps5-tile-subtitle">{{ .Params.subtitle }}</p>
            </div>
            
            <!-- Informations dÃ©taillÃ©es au hover -->
            <div class="ps5-tile-info">
                <div class="ps5-tile-info-content">
                    <h3 class="ps5-tile-info-title">{{ .Title }}</h3>
                    <p class="ps5-tile-info-subtitle">{{ .Params.subtitle }}</p>
                    <p class="ps5-tile-description">{{ .Params.description }}</p>
                    
                    <!-- Technologies -->
                    <div class="ps5-tile-tech">
                        {{ $techCount := len .Params.technologies }}
                        {{ range first 3 .Params.technologies }}
                        {{ $techName := . }}
                        {{ $found := false }}
                        {{ range $.Site.Data.technologies }}
                        {{ if eq .name $techName }}
                        <span class="ps5-tile-tech-item">{{ partial "tech-icon.html" . }} {{ .name }}</span>
                        {{ $found = true }}
                        {{ end }}
                        {{ end }}
                        {{ if not $found }}
                        <span class="ps5-tile-tech-item">{{ $techName }}</span>
                        {{ end }}
                        {{ end }}
                        {{ if gt $techCount 3 }}
                        <span class="ps5-tile-tech-more">+{{ sub $techCount 3 }}</span>
                        {{ end }}
                    </div>
                </div>
                
                <!-- Meta informations -->
                <div class="ps5-tile-meta">
                    <span class="ps5-tile-date">{{ .Date.Format "2006" }}</span>
                    <a href="{{ .Permalink }}" class="ps5-tile-btn">
                        {{ i18n "see_project" | default "Voir le projet" }}
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </div>
            </div>
            
            <!-- Lien principal invisible -->
            <a href="{{ .Permalink }}" class="ps5-tile-link" aria-label="{{ i18n "see_project" | default "Voir le projet" }}: {{ .Title }}"></a>
        </div>
        {{ end }}
        {{ end }}

        <!-- Apps/Web Projects -->
        {{ range where .Site.RegularPages "Section" "projects" }}
        {{ if and .Params.featured (eq .Params.sector "apps-web") }}
        <div class="ps5-project-tile" 
             data-project-id="{{ .File.BaseFileName }}" 
             data-background-image="{{ .Params.background_image | default .Params.image }}"
             data-sector="apps-web"
             data-category="apps-web" 
             data-technologies='{{ delimit .Params.technologies "," }}'
             style="display: none;">
            
            <!-- Image principale de la tuile -->
            <div class="ps5-tile-image">
                <img src="{{ .Params.image | default "/images/placeholder-project.jpg" }}" alt="{{ .Title }}" onerror="this.src='/images/placeholder-project.jpg'">
                <div class="ps5-tile-overlay"></div>
            </div>
            
            <!-- Badge featured -->
            {{ if .Params.featured }}
            <div class="ps5-tile-badge">â˜…</div>
            {{ end }}
            
            <!-- IcÃ´ne secteur -->
            <div class="ps5-tile-sector-icon">ðŸ›’</div>
            
            <!-- Contenu de base -->
            <div class="ps5-tile-content">
                <h3 class="ps5-tile-title">{{ .Title }}</h3>
                <p class="ps5-tile-subtitle">{{ .Params.subtitle }}</p>
            </div>
            
            <!-- Informations dÃ©taillÃ©es au hover -->
            <div class="ps5-tile-info">
                <div class="ps5-tile-info-content">
                    <h3 class="ps5-tile-info-title">{{ .Title }}</h3>
                    <p class="ps5-tile-info-subtitle">{{ .Params.subtitle }}</p>
                    <p class="ps5-tile-description">{{ .Params.description }}</p>
                    
                    <!-- Technologies -->
                    <div class="ps5-tile-tech">
                        {{ $techCount := len .Params.technologies }}
                        {{ range first 3 .Params.technologies }}
                        {{ $techName := . }}
                        {{ $found := false }}
                        {{ range $.Site.Data.technologies }}
                        {{ if eq .name $techName }}
                        <span class="ps5-tile-tech-item">{{ partial "tech-icon.html" . }} {{ .name }}</span>
                        {{ $found = true }}
                        {{ end }}
                        {{ end }}
                        {{ if not $found }}
                        <span class="ps5-tile-tech-item">{{ $techName }}</span>
                        {{ end }}
                        {{ end }}
                        {{ if gt $techCount 3 }}
                        <span class="ps5-tile-tech-more">+{{ sub $techCount 3 }}</span>
                        {{ end }}
                    </div>
                </div>
                
                <!-- Meta informations -->
                <div class="ps5-tile-meta">
                    <span class="ps5-tile-date">{{ .Date.Format "2006" }}</span>
                    <a href="{{ .Permalink }}" class="ps5-tile-btn">
                        {{ i18n "see_project" | default "Voir le projet" }}
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </div>
            </div>
            
            <!-- Lien principal invisible -->
            <a href="{{ .Permalink }}" class="ps5-tile-link" aria-label="{{ i18n "see_project" | default "Voir le projet" }}: {{ .Title }}"></a>
        </div>
        {{ end }}
        {{ end }}

        <!-- Mods & Tools Projects -->
        {{ range where .Site.RegularPages "Section" "projects" }}
        {{ if and .Params.featured (eq .Params.sector "mods-tools") }}
        <div class="ps5-project-tile" 
             data-project-id="{{ .File.BaseFileName }}" 
             data-background-image="{{ .Params.background_image | default .Params.image }}"
             data-sector="mods-tools"
             data-category="mods-tools" 
             data-technologies='{{ delimit .Params.technologies "," }}'
             style="display: none;">
            
            <!-- Image principale de la tuile -->
            <div class="ps5-tile-image">
                <img src="{{ .Params.image | default "/images/placeholder-project.jpg" }}" alt="{{ .Title }}" onerror="this.src='/images/placeholder-project.jpg'">
                <div class="ps5-tile-overlay"></div>
            </div>
            
            <!-- Badge featured -->
            {{ if .Params.featured }}
            <div class="ps5-tile-badge">â˜…</div>
            {{ end }}
            
            <!-- IcÃ´ne secteur -->
            <div class="ps5-tile-sector-icon">ðŸ”§</div>
            
            <!-- Contenu de base -->
            <div class="ps5-tile-content">
                <h3 class="ps5-tile-title">{{ .Title }}</h3>
                <p class="ps5-tile-subtitle">{{ .Params.subtitle }}</p>
            </div>
            
            <!-- Informations dÃ©taillÃ©es au hover -->
            <div class="ps5-tile-info">
                <div class="ps5-tile-info-content">
                    <h3 class="ps5-tile-info-title">{{ .Title }}</h3>
                    <p class="ps5-tile-info-subtitle">{{ .Params.subtitle }}</p>
                    <p class="ps5-tile-description">{{ .Params.description }}</p>
                    
                    <!-- Technologies -->
                    <div class="ps5-tile-tech">
                        {{ $techCount := len .Params.technologies }}
                        {{ range first 3 .Params.technologies }}
                        {{ $techName := . }}
                        {{ $found := false }}
                        {{ range $.Site.Data.technologies }}
                        {{ if eq .name $techName }}
                        <span class="ps5-tile-tech-item">{{ partial "tech-icon.html" . }} {{ .name }}</span>
                        {{ $found = true }}
                        {{ end }}
                        {{ end }}
                        {{ if not $found }}
                        <span class="ps5-tile-tech-item">{{ $techName }}</span>
                        {{ end }}
                        {{ end }}
                        {{ if gt $techCount 3 }}
                        <span class="ps5-tile-tech-more">+{{ sub $techCount 3 }}</span>
                        {{ end }}
                    </div>
                </div>
                
                <!-- Meta informations -->
                <div class="ps5-tile-meta">
                    <span class="ps5-tile-date">{{ .Date.Format "2006" }}</span>
                    <a href="{{ .Permalink }}" class="ps5-tile-btn">
                        {{ i18n "see_project" | default "Voir le projet" }}
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </div>
            </div>
            
            <!-- Lien principal invisible -->
            <a href="{{ .Permalink }}" class="ps5-tile-link" aria-label="{{ i18n "see_project" | default "Voir le projet" }}: {{ .Title }}"></a>
        </div>
        {{ end }}
        {{ end }}
    </div>
    
    <!-- See All Projects Button -->
    <div class="projects-see-all">
        <a href="{{ "/projects/" | relLangURL }}" class="btn-see-all">
            <span>{{ i18n "see_all_projects" | default "Voir tous les projets" }}</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </a>
    </div>
</section>