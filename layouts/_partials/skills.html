<section id="competences" class="skills-section">
    <div class="skills-header">
        <h2>{{ i18n "technical_skills" | default "Comp√©tences techniques" }}</h2>
        <p class="skills-subtitle">{{ i18n "skills_subtitle" | default "Ma√Ætrise des technologies modernes pour cr√©er des exp√©riences utilisateur exceptionnelles et des solutions techniques robustes. üíª" }}</p>
    </div>
    
    <div class="skills-categories-grid">
        
        {{/* Programming Languages - donn√©es directes */}}
        <div class="skills-category">
            <h4>{{ i18n "programming_languages" | default "Langages de programmation" }}</h4>
            <div class="skills-grid">
                {{ range sort .Site.Data.programming_languages "order" }}
                    {{ if .displayedInPortfolio }}
                    {{/* Conversion de l'exp√©rience num√©rique en texte */}}
                    {{ $experienceText := "" }}
                    {{ if .experience }}
                        {{ $exp := float .experience }}
                        {{ $years := int (math.Floor $exp) }}
                        {{ $months := int (math.Round (mul (sub $exp (math.Floor $exp)) 12)) }}
                        {{ if eq $years 0 }}
                            {{ if eq $months 1 }}
                                {{ $experienceText = "1 mois" }}
                            {{ else }}
                                {{ $experienceText = printf "%d mois" $months }}
                            {{ end }}
                        {{ else if eq $months 0 }}
                            {{ if eq $years 1 }}
                                {{ $experienceText = "1 an" }}
                            {{ else }}
                                {{ $experienceText = printf "%d ans" $years }}
                            {{ end }}
                        {{ else }}
                            {{ if eq $years 1 }}
                                {{ if eq $months 1 }}
                                    {{ $experienceText = "1 an et 1 mois" }}
                                {{ else }}
                                    {{ $experienceText = printf "1 an et %d mois" $months }}
                                {{ end }}
                            {{ else }}
                                {{ if eq $months 1 }}
                                    {{ $experienceText = printf "%d ans et 1 mois" $years }}
                                {{ else }}
                                    {{ $experienceText = printf "%d ans et %d mois" $years $months }}
                                {{ end }}
                            {{ end }}
                        {{ end }}
                    {{ end }}
                    <div class="skill-block clickable" 
                         onclick="openSkillModal('{{ .name }}', '{{ if .iconPath }}{{ .iconPath }}{{ else }}{{ .icon }}{{ end }}', '', '{{ .experience }}', '{{ if .iconPath }}svg{{ else }}emoji{{ end }}')"
                         data-skill-name="{{ .name }}"
                         data-skill-type="programming-language">
                        <span class="skill-icon">
                            {{ if .iconPath }}
                              <img src="{{ .iconPath }}" alt="{{ .name }}" class="tech-icon-svg" width="28" height="28">
                            {{ else }}
                              <span class="tech-icon-emoji">{{ .icon }}</span>
                            {{ end }}
                        </span>
                        <span class="skill-name">{{ .name }}</span>
                        {{ if $experienceText }}
                        <span class="skill-level">{{ $experienceText }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                {{ end }}
            </div>
        </div>

        {{/* Frameworks & Game Engines - donn√©es directes */}}
        <div class="skills-category">
            <h4>{{ i18n "frameworks_engines" | default "Frameworks & Moteurs" }}</h4>
            <div class="skills-grid">
                {{ range .Site.Data.frameworks_engines }}
                    {{ if .displayedInPortfolio }}
                    {{/* Conversion de l'exp√©rience num√©rique en texte */}}
                    {{ $experienceText := "" }}
                    {{ if .experience }}
                        {{ $exp := float .experience }}
                        {{ $years := int (math.Floor $exp) }}
                        {{ $months := int (math.Round (mul (sub $exp (math.Floor $exp)) 12)) }}
                        {{ if eq $years 0 }}
                            {{ if eq $months 1 }}
                                {{ $experienceText = "1 mois" }}
                            {{ else }}
                                {{ $experienceText = printf "%d mois" $months }}
                            {{ end }}
                        {{ else if eq $months 0 }}
                            {{ if eq $years 1 }}
                                {{ $experienceText = "1 an" }}
                            {{ else }}
                                {{ $experienceText = printf "%d ans" $years }}
                            {{ end }}
                        {{ else }}
                            {{ if eq $years 1 }}
                                {{ if eq $months 1 }}
                                    {{ $experienceText = "1 an et 1 mois" }}
                                {{ else }}
                                    {{ $experienceText = printf "1 an et %d mois" $months }}
                                {{ end }}
                            {{ else }}
                                {{ if eq $months 1 }}
                                    {{ $experienceText = printf "%d ans et 1 mois" $years }}
                                {{ else }}
                                    {{ $experienceText = printf "%d ans et %d mois" $years $months }}
                                {{ end }}
                            {{ end }}
                        {{ end }}
                    {{ end }}
                    <div class="skill-block clickable" 
                         onclick="openSkillModal('{{ .name }}', '{{ if .iconPath }}{{ .iconPath }}{{ else }}{{ .icon }}{{ end }}', '', '{{ .experience }}', '{{ if .iconPath }}svg{{ else }}emoji{{ end }}')"
                         data-skill-name="{{ .name }}"
                         data-skill-type="framework-engine">
                        <span class="skill-icon">
                            {{ if .iconPath }}
                              <img src="{{ .iconPath }}" alt="{{ .name }}" class="tech-icon-svg" width="28" height="28">
                            {{ else }}
                              <span class="tech-icon-emoji">{{ .icon }}</span>
                            {{ end }}
                        </span>
                        <span class="skill-name">{{ .name }}</span>
                        {{ if $experienceText }}
                        <span class="skill-level">{{ $experienceText }}</span>
                        {{ end }}
                    </div>
                    {{ end }}
                {{ end }}
            </div>
        </div>



        {{/* Specialties - donn√©es directes */}}
        <div class="skills-category">
            <h4>{{ i18n "specialties" | default "Sp√©cialit√©s" }}</h4>
            <div class="skills-grid">
                {{ range .Site.Data.specialties }}
                    {{ if .displayedInPortfolio }}
                <div class="skill-block clickable" 
                     onclick="openSkillModal('{{ .name }}', '{{ if .iconPath }}{{ .iconPath }}{{ else }}{{ .icon }}{{ end }}', '', '{{ .experience }}', '{{ if .iconPath }}svg{{ else }}emoji{{ end }}')"
                     data-skill-name="{{ .name }}"
                     data-skill-type="specialty">
                    <span class="skill-icon">
                        {{ if .iconPath }}
                          <img src="{{ .iconPath }}" alt="{{ .name }}" class="tech-icon-svg" width="28" height="28">
                        {{ else }}
                          <span class="tech-icon-emoji">{{ .icon }}</span>
                        {{ end }}
                    </span>
                    <span class="skill-name">{{ .name }}</span>
                    {{ if .subtitle }}
                    <span class="skill-level">{{ .subtitle }}</span>
                    {{ end }}
                </div>
                    {{ end }}
                {{ end }}
            </div>
        </div>

        {{/* Soft Skills - donn√©es directes */}}
        <div class="skills-category">
            <h4>{{ i18n "soft_skills" | default "Soft Skills" }}</h4>
            <div class="skills-grid">
                {{ range .Site.Data.soft_skills }}
                <div class="skill-block clickable" 
                     onclick="openSkillModal('{{ .name }}', '{{ if .iconPath }}{{ .iconPath }}{{ else }}{{ .icon }}{{ end }}', '', '{{ .experience }}', '{{ if .iconPath }}svg{{ else }}emoji{{ end }}')"
                     data-skill-name="{{ .name }}"
                     data-skill-type="soft-skill">
                    <span class="skill-icon">
                        {{ if .iconPath }}
                          <img src="{{ .iconPath }}" alt="{{ .name }}" class="tech-icon-svg" width="28" height="28">
                        {{ else }}
                          <span class="tech-icon-emoji">{{ .icon }}</span>
                        {{ end }}
                    </span>
                    <span class="skill-name">{{ .name }}</span>
                    {{ if .subtitle }}
                    <span class="skill-level">{{ .subtitle }}</span>
                    {{ end }}
                </div>
                {{ end }}
            </div>
        </div>

    </div>
</section>
