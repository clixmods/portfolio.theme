{{/*
  Partial: Gallery Modal Enhanced Layout
  Description: Structure HTML pour l'affichage des galeries d'images dans les modals de project widget
  Context: 
    - .gallery (slice) - Liste des images avec leurs donn√©es (url, caption)
    - .projectId (string) - ID du projet pour contextualiser les actions
*/}}

{{- $gallery := .gallery -}}
{{- $projectId := .projectId | default "" -}}

{{- if $gallery -}}
  {{- $total := len $gallery -}}
  
  <div class="gallery-modal-enhanced">
    <div class="gallery-stats-bar">
      <div class="gallery-count">
        <strong>{{ $total }}</strong> image{{ if gt $total 1 }}s{{ end }} dans la galerie
      </div>
      <div class="gallery-info">
        <span class="gallery-info-chip">Cliquez sur une image pour l'agrandir</span>
      </div>
    </div>
    
    <div class="gallery-modal-grid">
      {{- range $index, $image := $gallery -}}
        <div class="gallery-modal-item" 
             data-index="{{ $index }}"
             onclick="openImageModal('{{ .url }}', '{{ .caption }}')">
          <div class="gallery-item-container">
            <img src="{{ .url }}" 
                 alt="{{ .caption | default (printf "Image %d de la galerie" (add $index 1)) }}" 
                 loading="lazy">
            
            <div class="gallery-item-overlay">
              <div class="gallery-zoom-icon">
                <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                  <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                </svg>
              </div>
              
              <div class="gallery-item-index">
                {{ add $index 1 }}/{{ $total }}
              </div>
            </div>
            
            {{- if .caption -}}
            <div class="gallery-item-caption">
              {{ .caption }}
            </div>
            {{- end -}}
          </div>
        </div>
      {{- end -}}
    </div>
  </div>
{{- else -}}
  <div class="gallery-modal-empty">
    <div class="empty-state-icon">
      <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"/>
      </svg>
    </div>
    <p>Aucune image disponible dans cette galerie</p>
  </div>
{{- end -}}