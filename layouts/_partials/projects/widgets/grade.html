{{/*
  Partial: Grade Widget
  Description: Widget compact pour afficher la note académique d'un projet
  Context: 
    - .Params (dict) - Paramètres du projet avec .grade
    - .File.BaseFileName (string) - ID du projet
*/}}

{{- if .Params.grade -}}
<div class="project-widget grade-box {{ .Params.grade_size | default "size-small" }}">
  <div class="project-widget-header" onclick="toggleInfoBox(this)">
    <div class="project-widget-icon grade">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M19,3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M19,19H5V5H19V19M17,17H7V15H17V17M17,13H7V11H17V13M17,9H7V7H17V9Z"/>
      </svg>
    </div>
    <div class="project-widget-header-content">
      <h3 class="project-widget-title">Note académique</h3>
      <div class="project-widget-summary">{{ .Params.grade.subject | default "Évaluation" }}</div>
      <!-- Aperçu de la note -->
      <div class="project-widget-grade-preview">
        <div class="project-widget-grade-preview-value">{{ .Params.grade.value }}</div>
        <div class="project-widget-grade-preview-info">
          <div class="project-widget-grade-preview-subject">{{ .Params.grade.subject }}</div>
          <div class="project-widget-grade-preview-scale">/ {{ .Params.grade.scale }}</div>
        </div>
      </div>
    </div>
    <div class="project-widget-toggle">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
      </svg>
    </div>
  </div>
  <div class="project-widget-content">
    <div class="project-widget-grade-content">
      <div class="project-widget-grade-display">
        <div class="project-widget-grade-value">{{ .Params.grade.value }}</div>
        <div class="project-widget-grade-scale">/ {{ .Params.grade.scale }}</div>
      </div>
      <div class="project-widget-grade-details">
        <div class="project-widget-grade-subject">{{ .Params.grade.subject }}</div>
        {{- if .Params.grade.professor -}}
        <div class="project-widget-grade-professor">Professeur : {{ .Params.grade.professor }}</div>
        {{- end -}}
        {{- if .Params.grade.date -}}
        <div class="project-widget-grade-date">{{ .Params.grade.date }}</div>
        {{- end -}}
        {{- if .Params.grade.comment -}}
        <div class="project-widget-grade-comment">{{ .Params.grade.comment }}</div>
        {{- end -}}
      </div>
    </div>
  </div>
</div>
{{- end -}}