<div class="testimonials-section">
    <div class="section-header">
    <h2>{{ i18n "testimonials" | default "Recommandations" }}</h2>
        <p class="section-subtitle">
            {{ i18n "testimonials_subtitle" | default "Ce que mes collaborateurs et clients disent de mon travail" }}
        </p>
    </div>
    
    <div class="testimonials-slider">
        <div class="testimonials-track">
            {{ range .Site.Data.testimonials }}
            {{ $person := partial "helpers/get-person.html" (dict "context" $ "personId" .personId) }}
            <div class="testimonial-card aero-glass">
                <div class="testimonial-content">
                    <p class="testimonial-text">
                        "{{ .text }}"
                    </p>
                    <div class="testimonial-author{{ if $person }} clickable-person{{ end }}"{{ if $person }} data-person-id="{{ .personId }}" title="Voir le profil de {{ $person.Title }}"{{ end }}>
                        {{ if $person }}
                            {{ $avatar := $person.Params.avatar | default "/images/avatar6.svg" }}
                            <img src="{{ $avatar }}" alt="{{ $person.Title }}" class="testimonial-avatar" onerror="this.style.display='none'">
                            <div class="testimonial-info">
                                <div class="testimonial-name">{{ $person.Title }}</div>
                                <div class="testimonial-position">{{ .position }}</div>
                                <div class="testimonial-company">{{ .company }}</div>
                            </div>
                        {{ else }}
                            <img src="/images/avatar6.svg" alt="Unknown" class="testimonial-avatar">
                            <div class="testimonial-info">
                                <div class="testimonial-name">Personne inconnue ({{ .personId }})</div>
                                <div class="testimonial-position">{{ .position }}</div>
                                <div class="testimonial-company">{{ .company }}</div>
                            </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}
        </div>
        
        <div class="slider-controls">
            <button class="slider-btn prev" aria-label="{{ i18n "previous" | default "Précédent" }}">‹</button>
            <div class="slider-indicators">
                {{ range $index, $testimonial := .Site.Data.testimonials }}
                <span class="indicator{{ if eq $index 0 }} active{{ end }}"></span>
                {{ end }}
            </div>
            <button class="slider-btn next" aria-label="{{ i18n "next" | default "Suivant" }}">›</button>
        </div>
    </div>
</div>
