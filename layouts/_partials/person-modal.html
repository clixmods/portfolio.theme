{{/* Modal for displaying person details - Glassmorphism Design */}}
<div id="personModal" class="person-modal" style="display: none;">
    <div class="person-modal-backdrop" onclick="closePersonModal()"></div>
    <div class="person-modal-content">
        <button class="person-modal-close" onclick="closePersonModal()">&times;</button>
        
        <div class="person-modal-body">
            <!-- Header avec profil -->
            <div class="person-modal-profile-section">
                <div class="person-modal-profile-content">
                    <div class="person-modal-avatar-container">
                        <div class="person-modal-avatar-large" id="personAvatarLarge">
                            <img id="modalPersonAvatar" src="" alt="">
                        </div>
                    </div>
                    
                    <div class="person-modal-identity">
                        <h2 id="modalPersonName" class="person-modal-name"></h2>
                        <div class="person-modal-position-info">
                            <div class="position-and-company">
                                <span class="position-chip" id="modalPersonPosition"></span>
                                <span class="company-chip" id="modalPersonCompany"></span>
                            </div>
                            <div class="person-modal-contact-buttons" id="personModalContactButtons">
                                <!-- Contact buttons (LinkedIn, GitHub, website, email, discord) -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Testimonials section - pleine largeur dans le header -->
                <div id="modalPersonTestimonials" class="person-modal-testimonials-full-width">
                    <!-- Testimonials will be inserted here -->
                </div>
            </div>

            <!-- Navigation moderne avec sÃ©parateur -->
            <div class="person-modal-navigation">
                <nav class="person-modal-nav-tabs" role="tablist">
                    <button class="nav-tab active" role="tab" aria-selected="true" aria-controls="personModalTabBio" data-tab="bio">
                        <span class="nav-tab-icon">ðŸ‘¤</span>
                        <span class="nav-tab-label">Biographie</span>
                    </button>
                    <button class="nav-tab" role="tab" aria-selected="false" aria-controls="personModalTabProjects" data-tab="projects">
                        <span class="nav-tab-icon">ðŸš€</span>
                        <span class="nav-tab-label">Projets</span>
                    </button>
                </nav>
            </div>

            <!-- Contenu avec padding amÃ©liorÃ© -->
            <div class="person-modal-content-area">
                <div class="content-panel active" id="personModalTabBio" role="tabpanel" aria-labelledby="personModalTabBtnBio">
                    <div class="bio-container">
                        <div id="modalPersonBio" class="bio-content">
                            <!-- Person biography and details -->
                        </div>
                    </div>
                </div>
                <div class="content-panel" id="personModalTabProjects" role="tabpanel" aria-labelledby="personModalTabBtnProjects" hidden>
                    <div class="projects-container">
                        <div id="modalPersonProjects" class="projects-content">
                            <!-- Person projects will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


{{/* Integrate person data into the page to avoid API requests */}}
<script>
window.portfolioPeople = [
    {{- range where .Site.RegularPages "Section" "people" -}}
        {
            id: "{{ .Params.id }}",
            name: "{{ .Title }}",
            avatar: "{{ .Params.avatar }}",
            position: "{{ .Params.position }}",
            company: "{{ .Params.company }}",
            bio: "{{ .Params.bio }}",
            email: "{{ .Params.email }}",
            linkedin: "{{ .Params.linkedin }}",
            github: "{{ .Params.github }}",
            discord: "{{ .Params.discord }}",
            website: "{{ .Params.website }}",
            url: "{{ .RelPermalink }}",
            content: "{{ .Content }}"
        },
    {{- end -}}
];

window.portfolioTestimonials = [
    {{- range .Site.Data.testimonials -}}
    {
        personId: "{{ .personId }}",
        company: "{{ .company }}",
        position: "{{ .position }}",
        text: {{ .text | jsonify }}
    },
    {{- end -}}
];

window.portfolioProjects = [
    {{- range where .Site.RegularPages "Section" "projects" -}}
        {{- $hasContributors := false -}}
        {{- range .Params.contributors -}}
            {{- $hasContributors = true -}}
        {{- end -}}
        {{- if $hasContributors -}}
        {
            title: "{{ .Title }}",
            subtitle: "{{ .Params.subtitle }}",
            description: "{{ .Params.description }}",
            image: "{{ .Params.image }}",
            status: "{{ .Params.status }}",
            sector: "{{ .Params.sector }}",
            featured: {{ .Params.featured | default false }},
            url: "{{ .RelPermalink }}",
            contributors: [
                {{- range .Params.contributors -}}
                {
                    person: "{{ .person }}",
                    role: "{{ .role }}"
                },
                {{- end -}}
            ],
            programming_languages: {{ .Params.programming_languages | jsonify }},
            frameworks_engines: {{ .Params.frameworks_engines | jsonify }},
            specialties: {{ .Params.specialties | jsonify }},
            tags: {{ .Params.tags | jsonify }}
        },
        {{- end -}}
    {{- end -}}
];

// Note: La logique du modal est maintenant dans person-modal-logic.js
console.log('Person modal data loaded');
console.log('People data:', window.portfolioPeople?.length || 0);
console.log('Testimonials data:', window.portfolioTestimonials?.length || 0);
console.log('Projects data:', window.portfolioProjects?.length || 0);
</script>
