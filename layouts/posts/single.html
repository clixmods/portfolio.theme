{{ define "main" }}
<div class="blog-theme blog-single-page">
    <!-- Blog Article Header -->
    <header class="blog-article-header">
        <div class="blog-article-meta">
            <time class="post-date" datetime="{{ .Date.Format "2006-01-02" }}">
                {{ .Date.Format (.Site.Data.config.blog.dateFormat | default "02 Jan 2006") }}
            </time>
            {{ if .Params.category }}
            <span class="post-category">{{ .Params.category | title }}</span>
            {{ end }}
            {{ if .ReadingTime }}
            <span class="blog-reading-time">{{ .ReadingTime }} {{ i18n "reading_minutes" | default "min de lecture" }}</span>
            {{ end }}
        </div>

        <h1 class="blog-article-title">{{ .Title }}</h1>
        
        {{ if .Params.subtitle }}
        <p class="blog-article-subtitle">{{ .Params.subtitle }}</p>
        {{ end }}

        <!-- Featured Image -->
        {{ if .Params.image }}
        <div class="blog-article-image">
            <img src="{{ .Params.image }}" alt="{{ .Title }}" loading="lazy">
        </div>
        {{ end }}
    </header>

    <!-- Blog Article Content -->
    <main class="blog-article-content">
        <div class="blog-content-wrapper">
            {{ .Content }}
        </div>

        <!-- Tags (if applicable) -->
        {{ if .Params.tags }}
        <div class="blog-article-technologies">
            <h3>{{ i18n "tags" | default "Tags" }}</h3>
            <div class="blog-technologies">
                {{ range .Params.tags }}
                <span class="tech-chip">{{ . }}</span>
                {{ end }}
            </div>
        </div>
        {{ end }}

        <!-- External Links -->
        {{ if or .Params.demo_link .Params.github_link .Params.external_link }}
        <div class="blog-article-links">
            <h3>{{ i18n "useful_links" | default "Liens utiles" }}</h3>
            <div class="blog-actions">
                {{ if .Params.demo_link }}
                <a href="{{ .Params.demo_link }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    üöÄ {{ i18n "view_demo" | default "Voir la d√©mo" }}
                </a>
                {{ end }}
                {{ if .Params.github_link }}
                <a href="{{ .Params.github_link }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    üìö {{ i18n "source_code" | default "Code source" }}
                </a>
                {{ end }}
                {{ if .Params.external_link }}
                <a href="{{ .Params.external_link }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    üîó {{ i18n "external_link" | default "Lien externe" }}
                </a>
                {{ end }}
            </div>
        </div>
        {{ end }}
    </main>

    <!-- Blog Article Footer -->
    <footer class="blog-article-footer">
        <!-- Author Info -->
        <div class="blog-author-info clickable-person" data-person-id="clement-garcia" title="Voir le profil de {{ .Site.Data.profile.personal.fullName }}">
            <div class="blog-author-avatar">
                <img src="{{ .Site.Data.profile.media.profileImage }}" alt="{{ .Site.Data.profile.personal.fullName }}" loading="lazy">
            </div>
            <div class="blog-author-content">
                <h3>{{ i18n "about_author" | default "√Ä propos de l'auteur" }}</h3>
                <h4>{{ .Site.Data.profile.personal.fullName }}</h4>
                <p>{{ .Site.Data.profile.personal.subtitle | default (i18n "author_bio_default" | default "D√©veloppeur passionn√© par les nouvelles technologies et l'innovation.") }}</p>
                <small>{{ i18n "click_to_see_profile" | default "Cliquez pour voir le profil complet" }}</small>
            </div>
        </div>

        <!-- Share Section -->
        <div class="blog-share-section">
            <h3>{{ i18n "share_article" | default "Partager cet article" }}</h3>
            <div class="blog-share-buttons">
                <a href="https://twitter.com/intent/tweet?text={{ .Title }}&url={{ .Permalink }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    üê¶ Twitter
                </a>
                <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ .Permalink }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    üíº LinkedIn
                </a>
                <button class="read-more-btn" onclick="copyToClipboard('{{ .Permalink }}')">
                    üìã {{ i18n "copy_link" | default "Copier le lien" }}
                </button>
            </div>
        </div>

        <!-- Navigation to Previous/Next Posts -->
        <nav class="blog-post-navigation">
            {{ with .PrevInSection }}
            <div class="blog-nav-item blog-nav-prev">
                <span class="blog-nav-label">{{ i18n "previous_article" | default "Article pr√©c√©dent" }}</span>
                <a href="{{ .Permalink }}" class="blog-nav-link">
                    <h4>{{ .Title }}</h4>
                    <time>{{ .Date.Format "02 Jan 2006" }}</time>
                </a>
            </div>
            {{ end }}

            {{ with .NextInSection }}
            <div class="blog-nav-item blog-nav-next">
                <span class="blog-nav-label">{{ i18n "next_article" | default "Article suivant" }}</span>
                <a href="{{ .Permalink }}" class="blog-nav-link">
                    <h4>{{ .Title }}</h4>
                    <time>{{ .Date.Format "02 Jan 2006" }}</time>
                </a>
            </div>
            {{ end }}
        </nav>

        <!-- Related Posts -->
        {{ $related := .Site.RegularPages.Related . }}
        {{ with $related }}
        <section class="blog-related-posts">
            <h3>{{ i18n "related_posts" | default "Articles similaires" }}</h3>
            <div class="blog-related-grid">
                {{ range first 3 . }}
                <article class="blog-related-card">
                    <div class="blog-related-image">
                        {{ if .Params.image }}
                        <img src="{{ .Params.image }}" alt="{{ .Title }}" loading="lazy">
                        {{ else }}
                        <div class="blog-image-placeholder">
                            <div class="blog-icon">üìù</div>
                        </div>
                        {{ end }}
                    </div>
                    <div class="blog-related-content">
                        <time class="post-date">{{ .Date.Format "02 Jan" }}</time>
                        <h4><a href="{{ .Permalink }}">{{ .Title }}</a></h4>
                        <p>{{ .Summary | truncate 80 }}</p>
                    </div>
                </article>
                {{ end }}
            </div>
        </section>
        {{ end }}

        <!-- Back to Blog -->
        <div class="blog-back-to-list">
            <a href="{{ "/posts" | relLangURL }}" class="view-all-posts">
                ‚Üê {{ i18n "back_to_blog" | default "Retour au blog" }}
            </a>
        </div>
    </footer>
</div>

<!-- JavaScript for copy functionality -->
<script>
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        // You could add a toast notification here
        console.log('Lien copi√© dans le presse-papier');
    });
}
</script>
{{ end }}
