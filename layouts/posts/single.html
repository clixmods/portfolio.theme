{{ define "main" }}
<div class="blog-theme blog-single-page">
    <!-- Blog Article Header -->
    <header class="blog-article-header">
        <div class="blog-article-meta">
            <time class="post-date" datetime="{{ .Date.Format "2006-01-02" }}">
                {{ .Date.Format (.Site.Data.config.blog.dateFormat | default "02 Jan 2006") }}
            </time>
            {{ if .Params.category }}
            <span class="post-category">{{ .Params.category | title }}</span>
            {{ end }}
            {{ if .ReadingTime }}
            <span class="blog-reading-time">{{ .ReadingTime }} {{ i18n "reading_minutes" | default "min de lecture" }}</span>
            {{ end }}
        </div>

        <h1 class="blog-article-title">{{ .Title }}</h1>
        
        {{ if .Params.subtitle }}
        <p class="blog-article-subtitle">{{ .Params.subtitle }}</p>
        {{ end }}

        <!-- Featured Image -->
        {{ if .Params.image }}
        <div class="blog-article-image">
            <img src="{{ .Params.image }}" alt="{{ .Title }}" loading="lazy">
        </div>
        {{ end }}
    </header>

    <!-- Blog Article Content -->
    <main class="blog-article-content">
        <div class="blog-content-wrapper">
            {{ .Content }}
        </div>

        <!-- Tags (if applicable) -->
        {{ if .Params.tags }}
        <div class="blog-article-technologies">
            <h3>{{ i18n "tags" | default "Tags" }}</h3>
            <div class="blog-technologies">
                {{ range .Params.tags }}
                <span class="tech-chip">{{ . }}</span>
                {{ end }}
            </div>
        </div>
        {{ end }}

        <!-- External Links -->
        {{ if or .Params.demo_link .Params.github_link .Params.external_link }}
        <div class="blog-article-links">
            <h3>{{ i18n "useful_links" | default "Liens utiles" }}</h3>
            <div class="blog-actions">
                {{ if .Params.demo_link }}
                <a href="{{ .Params.demo_link }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    ðŸš€ {{ i18n "view_demo" | default "Voir la dÃ©mo" }}
                </a>
                {{ end }}
                {{ if .Params.github_link }}
                <a href="{{ .Params.github_link }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    ðŸ“š {{ i18n "source_code" | default "Code source" }}
                </a>
                {{ end }}
                {{ if .Params.external_link }}
                <a href="{{ .Params.external_link }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    ðŸ”— {{ i18n "external_link" | default "Lien externe" }}
                </a>
                {{ end }}
            </div>
        </div>
        {{ end }}
    </main>

    <!-- Blog Article Footer -->
    <footer class="blog-article-footer">
        <!-- Author Info -->
        <div class="blog-author-info clickable-person" data-person-id="clement-garcia" title="Voir le profil de {{ .Site.Data.profile.personal.fullName }}">
            <div class="blog-author-avatar">
                <img src="{{ .Site.Data.profile.media.profileImage }}" alt="{{ .Site.Data.profile.personal.fullName }}" loading="lazy">
            </div>
            <div class="blog-author-content">
                <h3>{{ i18n "about_author" | default "Ã€ propos de l'auteur" }}</h3>
                <h4>{{ .Site.Data.profile.personal.fullName }}</h4>
                <p>{{ .Site.Data.profile.personal.subtitle | default (i18n "author_bio_default" | default "DÃ©veloppeur passionnÃ© par les nouvelles technologies et l'innovation.") }}</p>
                <small>{{ i18n "click_to_see_profile" | default "Cliquez pour voir le profil complet" }}</small>
            </div>
        </div>

        <!-- Share Section -->
        <div class="blog-share-section">
            <h3>{{ i18n "share_article" | default "Partager cet article" }}</h3>
            <div class="blog-share-buttons">
                <a href="https://twitter.com/intent/tweet?text={{ .Title }}&url={{ .Permalink }}" 
                   class="blog-share-btn blog-share-twitter" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   title="Partager sur Twitter">
                    <img src="/images/social/twitter.svg" alt="Twitter" loading="lazy">
                </a>
                <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ .Permalink }}" 
                   class="blog-share-btn blog-share-linkedin" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   title="Partager sur LinkedIn">
                    <img src="/images/social/linkedin.svg" alt="LinkedIn" loading="lazy">
                </a>
                <button class="blog-share-btn blog-share-copy" 
                        onclick="copyToClipboard('{{ .Permalink }}')"
                        title="{{ i18n "copy_link" | default "Copier le lien" }}">
                    <img src="/images/social/external-link.svg" alt="Copier le lien" loading="lazy">
                </button>
            </div>
        </div>

        <!-- Navigation to Previous/Next Posts -->
        <nav class="blog-post-navigation">
            {{ with .PrevInSection }}
            <div class="blog-nav-item blog-nav-prev">
                <span class="blog-nav-label">{{ i18n "previous_article" | default "Article prÃ©cÃ©dent" }}</span>
                <a href="{{ .Permalink }}" class="blog-nav-link">
                    <h4>{{ .Title }}</h4>
                    <time>{{ .Date.Format "02 Jan 2006" }}</time>
                </a>
            </div>
            {{ end }}

            {{ with .NextInSection }}
            <div class="blog-nav-item blog-nav-next">
                <span class="blog-nav-label">{{ i18n "next_article" | default "Article suivant" }}</span>
                <a href="{{ .Permalink }}" class="blog-nav-link">
                    <h4>{{ .Title }}</h4>
                    <time>{{ .Date.Format "02 Jan 2006" }}</time>
                </a>
            </div>
            {{ end }}
        </nav>

        {{/*
        <!-- Related Posts -->
        {{ $related := where (.Site.RegularPages.Related .) "Draft" false }}
        {{ with $related }}
        <section class="blog-related-posts">
            <h3>{{ i18n "related_posts" | default "Articles similaires" }}</h3>
            <div class="blog-related-grid">
                {{ range first 3 . }}
                <article class="blog-card {{ if not .Params.image }}blog-card--no-image{{ end }}" 
                         data-category="{{ .Params.category | default "tech" | lower }}"
                         data-tags="{{ if .Params.tags }}{{ delimit .Params.tags "," }}{{ end }}"
                         data-date="{{ .Date.Format "2006-01-02" }}"
                         data-title="{{ .Title | lower }}">
                    
                    <!-- Blog Category (top left) -->
                    {{ if .Params.category }}
                    <span class="post-category">{{ .Params.category | title }}</span>
                    {{ end }}
                    
                    <!-- Reading Time (top right) -->
                    {{ if .ReadingTime }}
                    <div class="blog-reading-time">{{ .ReadingTime }} {{ i18n "reading_minutes" | default "min de lecture" }}</div>
                    {{ end }}

                    {{ if .Params.image }}
                    <!-- Blog Image -->
                    <div class="blog-image">
                        <img src="{{ .Params.image }}" alt="{{ .Title }}" loading="lazy">
                    </div>
                    {{ end }}

                    <!-- Blog Content -->
                    <div class="blog-content">
                        <!-- Blog Title -->
                        <h2 class="blog-title">
                            <a href="{{ .Permalink }}" class="blog-title-link">{{ .Title }}</a>
                        </h2>

                        <!-- Blog Description -->
                        <p class="blog-description">
                            {{ if .Params.description }}
                                {{ .Params.description | truncate 150 "..." }}
                            {{ else }}
                                {{ .Summary | truncate 150 "..." }}
                            {{ end }}
                        </p>
                    </div>

                    <!-- Blog Footer -->
                    <div class="blog-card-footer">
                        <!-- Date (bottom left) -->
                        <time class="post-date" datetime="{{ .Date.Format "2006-01-02" }}">
                            {{ .Date.Format (.Site.Data.config.blog.dateFormat | default "02 Jan 2006") }}
                        </time>
                        
                        <!-- Read Article Button (bottom right) -->
                        <a href="{{ .Permalink }}" class="read-more-btn">
                            {{ i18n "read_article" | default "Lire l'article" }}
                        </a>
                    </div>
                </article>
                {{ end }}
            </div>
        </section>
        {{ end }}
        */}}

        <!-- Back to Blog -->
        <div class="blog-back-to-list">
            <a href="{{ "/posts" | relLangURL }}" class="btn-action primary">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                {{ i18n "back_to_blog" | default "Retour au blog" }}
            </a>
        </div>
    </footer>
</div>

<!-- JavaScript for copy functionality -->
<script>
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        // You could add a toast notification here
        console.log('Lien copiÃ© dans le presse-papier');
    });
}
</script>
{{ end }}
