{{ define "main" }}
<div class="blog-theme blog-single-page">
    <!-- Blog Article Header -->
    <header class="blog-article-header">
        <div class="blog-article-meta">
            <time class="post-date" datetime="{{ .Date.Format "2006-01-02" }}">
                {{ partial "helpers/format-date-fr.html" (dict "date" .Date "context" .) }}
            </time>
            {{ if .Params.category }}
            <span class="post-category">{{ .Params.category | title }}</span>
            {{ end }}
            {{ if .ReadingTime }}
            <span class="blog-reading-time">{{ .ReadingTime }} {{ i18n "reading_minutes" | default "min de lecture" }}</span>
            {{ end }}
        </div>

        <h1 class="blog-article-title">{{ .Title }}</h1>
        
        {{ if .Params.subtitle }}
        <p class="blog-article-subtitle">{{ .Params.subtitle }}</p>
        {{ end }}

        <!-- Featured Image -->
        {{ if .Params.image }}
        {{- $featuredImg := partial "helpers/get-optimized-image.html" (dict "imagePath" .Params.image "width" 1200 "quality" 90) -}}
        <div class="blog-article-image">
            <img src="{{ $featuredImg.src }}" 
                 width="{{ $featuredImg.width }}" 
                 height="{{ $featuredImg.height }}" 
                 alt="{{ .Title }}" 
                 loading="lazy">
        </div>
        {{ end }}
    </header>

    <!-- Blog Article Content -->
    <main class="blog-article-content">
        <div class="blog-content-wrapper">
            {{ .Content }}
        </div>

        <!-- Tags (if applicable) -->
        {{/* if .Params.tags */}}
        {{/* <div class="blog-article-technologies">
            <h3>{{ i18n "tags" | default "Tags" }}</h3>
            <div class="blog-technologies">
                {{ range .Params.tags }}
                <span class="tech-chip">{{ . }}</span>
                {{ end }}
            </div>
        </div> */}}
        {{/* end */}}

        <!-- External Links -->
        {{ if or .Params.demo_link .Params.github_link .Params.external_link }}
        <div class="blog-article-links">
            <h3>{{ i18n "useful_links" | default "Liens utiles" }}</h3>
            <div class="blog-actions">
                {{ if .Params.demo_link }}
                <a href="{{ .Params.demo_link }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    ðŸš€ {{ i18n "view_demo" | default "Voir la dÃ©mo" }}
                </a>
                {{ end }}
                {{ if .Params.github_link }}
                <a href="{{ .Params.github_link }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    ðŸ“š {{ i18n "source_code" | default "Code source" }}
                </a>
                {{ end }}
                {{ if .Params.external_link }}
                <a href="{{ .Params.external_link }}" 
                   class="read-more-btn" 
                   target="_blank" 
                   rel="noopener noreferrer">
                    ðŸ”— {{ i18n "external_link" | default "Lien externe" }}
                </a>
                {{ end }}
            </div>
        </div>
        {{ end }}
    </main>

    <!-- Blog Article Footer -->
    <footer class="blog-article-footer">
        <!-- Author Info -->
        {{- /* Load localized profile data */ -}}
        {{- $profileData := partial "get-localized-data.html" (dict "context" . "dataName" "profile") -}}
        
        {{- $authorAvatar := partial "helpers/get-optimized-image.html" (dict "imagePath" $profileData.media.profileImage "width" 200 "quality" 90) -}}
        <div class="blog-author-info clickable-person" data-person-id="clement-garcia" title="{{ i18n "view_profile_of" | default "Voir le profil de" }} {{ $profileData.personal.fullName }}">
            <div class="blog-author-avatar">
                <img src="{{ $authorAvatar.src }}" 
                     width="{{ $authorAvatar.width }}" 
                     height="{{ $authorAvatar.height }}" 
                     alt="{{ $profileData.personal.fullName }}" 
                     loading="lazy">
            </div>
            <div class="blog-author-content">
                <h3>{{ i18n "about_author" | default "Ã€ propos de l'auteur" }}</h3>
                <h4>{{ $profileData.personal.fullName }}</h4>
                <p>{{ $profileData.personal.subtitle | default (i18n "author_bio_default" | default "DÃ©veloppeur passionnÃ© par les nouvelles technologies et l'innovation.") }}</p>
                <small>{{ i18n "click_to_see_profile" | default "Cliquez pour voir le profil complet" }}</small>
            </div>
        </div>

        <!-- Share Section -->
        <div class="blog-share-section">
            <h3>{{ i18n "share_article" | default "Partager cet article" }}</h3>
            <div class="blog-share-buttons">
                <a href="https://twitter.com/intent/tweet?text={{ .Title }}&url={{ .Permalink }}" 
                   class="btn-action-icon" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   title="Partager sur Twitter">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                    </svg>
                </a>
                <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ .Permalink }}" 
                   class="btn-action-icon" 
                   target="_blank" 
                   rel="noopener noreferrer"
                   title="Partager sur LinkedIn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                </a>
                <button class="btn-action-icon" 
                        onclick="copyToClipboard('{{ .Permalink }}')"
                        title="{{ i18n "copy_link" | default "Copier le lien" }}">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Navigation to Previous/Next Posts -->
        <nav class="blog-post-navigation">
            {{ with .PrevInSection }}
            <div class="blog-nav-item blog-nav-prev">
                <span class="blog-nav-label">{{ i18n "previous_article" | default "Article prÃ©cÃ©dent" }}</span>
                <a href="{{ .Permalink }}" class="blog-nav-link">
                    <h4>{{ .Title }}</h4>
                    <time>{{ .Date.Format "02 Jan 2006" }}</time>
                </a>
            </div>
            {{ end }}

            {{ with .NextInSection }}
            <div class="blog-nav-item blog-nav-next">
                <span class="blog-nav-label">{{ i18n "next_article" | default "Article suivant" }}</span>
                <a href="{{ .Permalink }}" class="blog-nav-link">
                    <h4>{{ .Title }}</h4>
                    <time>{{ .Date.Format "02 Jan 2006" }}</time>
                </a>
            </div>
            {{ end }}
        </nav>

        <!-- Back to Blog -->
        <div class="blog-back-to-list">
            <a href="{{ "/posts" | relLangURL }}" class="btn-action">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                {{ i18n "back_to_blog" | default "Retour au blog" }}
            </a>
        </div>
    </footer>
</div>

<!-- JavaScript for copy functionality -->
<script>
function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        // You could add a toast notification here
        console.log('Lien copiÃ© dans le presse-papier');
    });
}
</script>
{{ end }}
