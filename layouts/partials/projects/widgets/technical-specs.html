{{/*
  Partial: Technical Specifications Widget
  Description: Widget compact pour afficher les spécifications techniques d'un projet
  Context: 
    - .Params (dict) - Paramètres du projet avec .programming_languages, .frameworks_engines, .technical_specs
    - .Site.Data - Données des technologies
    - .File.BaseFileName (string) - ID du projet
*/}}

{{- $hasProgLang := .Params.programming_languages -}}
{{- $hasFrameworks := .Params.frameworks_engines -}}
{{- $hasTechSpecs := .Params.technical_specs -}}
{{- if or (and $hasProgLang (gt (len $hasProgLang) 0)) (and $hasFrameworks (gt (len $hasFrameworks) 0)) (and $hasTechSpecs (gt (len $hasTechSpecs) 0)) -}}
<div class="project-widget technical-specs-box {{ .Params.technical_specs_size | default "size-medium" }}">
  <div class="project-widget-header" onclick="toggleInfoBox(this)">
    <div class="project-widget-icon technical">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
      </svg>
    </div>
    <div class="project-widget-header-content">
      <h3 class="project-widget-title">{{ i18n "technical_specifications" | default "Spécifications techniques" }}</h3>
      {{- $progLangCount := 0 -}}
      {{- $frameworksCount := 0 -}}
      {{- $techSpecsCount := 0 -}}
      {{- if $hasProgLang -}}{{ $progLangCount = len $hasProgLang }}{{- end -}}
      {{- if $hasFrameworks -}}{{ $frameworksCount = len $hasFrameworks }}{{- end -}}
      {{- if $hasTechSpecs -}}{{ $techSpecsCount = len $hasTechSpecs }}{{- end -}}
      {{- $totalCount := add (add $progLangCount $frameworksCount) $techSpecsCount -}}
      <div class="project-widget-summary">{{ $totalCount }} {{ if eq $totalCount 1 }}{{ i18n "specification" | default "spécification" }}{{ else }}{{ i18n "specifications" | default "spécifications" }}{{ end }}</div>
    </div>
    <div class="project-widget-toggle">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
      </svg>
    </div>
  </div>
  <div class="project-widget-content">
    <div class="project-widget-technical-specs-list">
      {{/* Langages de programmation automatiques */}}
      {{- if $hasProgLang -}}
      <div class="project-widget-spec-item">
        <div class="project-widget-spec-label">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
            <path d="M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6Z"/>
          </svg>
          {{ i18n "programming_languages" | default "Langages de programmation" }}
        </div>
        <div class="project-widget-spec-value">
          {{ partial "tech/project-tech-specs.html" (dict "TechType" "programming_languages" "TechList" $hasProgLang "Site" .Site) }}
        </div>
      </div>
      {{- end -}}
      {{/* Frameworks et moteurs automatiques */}}
      {{- if $hasFrameworks -}}
      <div class="project-widget-spec-item">
        <div class="project-widget-spec-label">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
          </svg>
          {{ i18n "frameworks_engines" | default "Frameworks & Moteurs" }}
        </div>
        <div class="project-widget-spec-value">
          {{ partial "tech/project-tech-specs.html" (dict "TechType" "frameworks_engines" "TechList" $hasFrameworks "Site" .Site) }}
        </div>
      </div>
      {{- end -}}
      {{/* Spécifications techniques personnalisées */}}
      {{- if $hasTechSpecs -}}
        {{- range $hasTechSpecs -}}
      <div class="project-widget-spec-item">
        <div class="project-widget-spec-label">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
            <path d="M14.19,14.19L6,18L9.81,9.81L18,6M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,10.9A1.1,1.1 0 0,0 10.9,12A1.1,1.1 0 0,0 12,13.1A1.1,1.1 0 0,0 13.1,12A1.1,1.1 0 0,0 12,10.9Z"/>
          </svg>
          {{ .label }}
        </div>
        <div class="project-widget-spec-value">{{ .value }}</div>
      </div>
        {{- end -}}
      {{- end -}}
    </div>
    {{- if or $hasProgLang $hasFrameworks -}}
    <div class="tech-specs-hint">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
        <path d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"/>
      </svg>
      {{ i18n "click_tech_see_details" | default "Cliquez sur les technologies pour voir les détails et projets associés" }}
    </div>
    {{- end -}}
  </div>
</div>
{{- end -}}