{{/*
  Helper to load multiple CSS files matching a pattern
  
  Usage: {{ partial "helpers/load-css-pattern.html" "css/shared/widgets/*.css" }}
  
  Params:
  - . (string): Glob pattern to match CSS files
  
  Production mode:
  - Runs PostCSS (including PurgeCSS) to remove unused CSS
  - Minifies and fingerprints for cache busting
  - Adds integrity attribute for security
*/}}
{{- $resources := resources.Match . }}
{{- if not $resources }}
  {{- warnf "No CSS files found matching pattern: %s" . }}
{{- end }}
{{- range sort $resources "Name" }}
  {{- if hugo.IsDevelopment }}
    <link rel="stylesheet" href="{{ .RelPermalink }}">
  {{- else }}
    {{- with . | css.PostCSS | minify | fingerprint | resources.PostProcess }}
      <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous">
    {{- end }}
  {{- end }}
{{- end }}
