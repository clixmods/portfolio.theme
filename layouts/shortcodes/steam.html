{{/*
Shortcode Steam pour liens vers jeux, profils, etc.
Utilisation:
{{< steam game="730" >}}
{{< steam game="730" title="Counter-Strike 2" >}}
{{< steam profile="clixmods" >}}
{{< steam workshop="123456789" >}}
*/}}

{{ $game := .Get "game" }}
{{ $profile := .Get "profile" }}
{{ $workshop := .Get "workshop" }}
{{ $title := .Get "title" }}
{{ $description := .Get "description" }}
{{ $type := .Get "type" | default "store" }}

{{ $url := "" }}
{{ $displayTitle := $title }}
{{ $iconType := "game" }}

{{ if $game }}
  {{ if eq $type "store" }}
    {{ $url = printf "https://store.steampowered.com/app/%s" $game }}
  {{ else if eq $type "community" }}
    {{ $url = printf "https://steamcommunity.com/app/%s" $game }}
  {{ end }}
  
  {{ if not $displayTitle }}
    {{ $displayTitle = printf "Jeu Steam #%s" $game }}
  {{ end }}
  
{{ else if $profile }}
  {{ $url = printf "https://steamcommunity.com/id/%s" $profile }}
  {{ if not $displayTitle }}
    {{ $displayTitle = printf "Profil Steam: %s" $profile }}
  {{ end }}
  {{ $iconType = "profile" }}
  
{{ else if $workshop }}
  {{ $url = printf "https://steamcommunity.com/sharedfiles/filedetails/?id=%s" $workshop }}
  {{ if not $displayTitle }}
    {{ $displayTitle = "Atelier Steam" }}
  {{ end }}
  {{ $iconType = "workshop" }}
{{ end }}

{{ if $url }}
<div class="platform-link steam-link">
  <a href="{{ $url }}" target="_blank" rel="noopener noreferrer" class="platform-link-content">
    <div class="platform-icon steam-icon">
      {{ if eq $iconType "profile" }}
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
      </svg>
      {{ else if eq $iconType "workshop" }}
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
      </svg>
      {{ else }}
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <circle cx="12" cy="12" r="10"/>
        <polygon points="10,8 16,12 10,16"/>
      </svg>
      {{ end }}
    </div>
    
    <div class="platform-content">
      <div class="platform-title">{{ $displayTitle }}</div>
      {{ if $description }}
      <div class="platform-description">{{ $description }}</div>
      {{ end }}
      <div class="platform-badge steam-badge">Steam</div>
    </div>
    
    <div class="platform-arrow">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
        <path d="M7 7h8.586L5.293 17.293l1.414 1.414L17 8.414V17h2V5H7v2z"/>
      </svg>
    </div>
  </a>
</div>
{{ else }}
<div class="shortcode-error">
  <p><strong>Erreur:</strong> Un ID de jeu, profil ou workshop est requis.</p>
  <p>Utilisation: <code>{{ "{{< steam game=\"APP_ID\" >}}" }}</code>, <code>{{ "{{< steam profile=\"USERNAME\" >}}" }}</code> ou <code>{{ "{{< steam workshop=\"ID\" >}}" }}</code></p>
</div>
{{ end }}