{{/*
Shortcode PlayStation pour liens vers jeux PS4/PS5, profils PSN, etc.
Utilisation:
{{< playstation game="PPSA01325_00" title="Spider-Man: Miles Morales" >}}
{{< playstation profile="ClixMods" >}}
{{< playstation store="UP9000-PPSA01325_00" >}}
*/}}

{{ $game := .Get "game" }}
{{ $profile := .Get "profile" }}
{{ $store := .Get "store" }}
{{ $title := .Get "title" }}
{{ $description := .Get "description" }}
{{ $platform := .Get "platform" | default "PS5" }}

{{ $url := "" }}
{{ $displayTitle := $title }}
{{ $iconType := "game" }}

{{ if $game }}
  {{ $url = printf "https://www.playstation.com/games/%s" $game }}
  {{ if not $displayTitle }}
    {{ $displayTitle = printf "Jeu %s" $platform }}
  {{ end }}
  
{{ else if $store }}
  {{ $url = printf "https://store.playstation.com/concept/%s" $store }}
  {{ if not $displayTitle }}
    {{ $displayTitle = "PlayStation Store" }}
  {{ end }}
  {{ $iconType = "store" }}
  
{{ else if $profile }}
  {{ $url = printf "https://psnprofiles.com/%s" $profile }}
  {{ if not $displayTitle }}
    {{ $displayTitle = printf "Profil PSN: %s" $profile }}
  {{ end }}
  {{ $iconType = "profile" }}
{{ end }}

{{ if $url }}
<div class="platform-link playstation-link">
  <a href="{{ $url }}" target="_blank" rel="noopener noreferrer" class="platform-link-content">
    <div class="platform-icon playstation-icon">
      {{ if eq $iconType "profile" }}
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
      </svg>
      {{ else if eq $iconType "store" }}
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <path d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12L8.1 13h7.45c.75 0 1.41-.41 1.75-1.03L21.7 4H5.21l-.94-2H1zm16 16c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
      </svg>
      {{ else }}
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <path d="M21.58 16.09l-1.09-7.66A3.996 3.996 0 0 0 16.53 5H7.47C5.48 5 3.79 6.46 3.51 8.43l-1.09 7.66C2.25 17.2 3.06 18 4.09 18h1.3c.95 0 1.8-.63 2.06-1.54L8 15h8l.55 1.46c.26.91 1.11 1.54 2.06 1.54h1.3c1.03 0 1.84-.8 1.67-1.91zM9 11H7V9h2v2zm6 0h2v2h-2V9z"/>
      </svg>
      {{ end }}
    </div>
    
    <div class="platform-content">
      <div class="platform-title">{{ $displayTitle }}</div>
      {{ if $description }}
      <div class="platform-description">{{ $description }}</div>
      {{ end }}
      <div class="platform-badge playstation-badge">{{ $platform }}</div>
    </div>
    
    <div class="platform-arrow">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
        <path d="M7 7h8.586L5.293 17.293l1.414 1.414L17 8.414V17h2V5H7v2z"/>
      </svg>
    </div>
  </a>
</div>
{{ else }}
<div class="shortcode-error">
  <p><strong>Erreur:</strong> Un ID de jeu, profil ou store est requis.</p>
  <p>Utilisation: <code>{{ "{{< playstation game=\"GAME_ID\" title=\"Nom du jeu\" >}}" }}</code> ou <code>{{ "{{< playstation profile=\"USERNAME\" >}}" }}</code></p>
</div>
{{ end }}