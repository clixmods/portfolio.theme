{{ define "main" }}
<!-- Project Hero Section -->
{{ if .Params.image }}
<style>
    body {
        --hero-bg-image: url('{{ .Params.image }}');
    }
</style>
{{ end }}
<!-- Fixed Background Overlay -->
<div class="project-hero-overlay"></div>
<section class="project-hero">
    <div class="project-hero-content">
        <!-- Top Section: Back Button -->
        <div class="project-hero-top">
            <!-- Back to Portfolio Button -->
            <div class="project-back-button">
                <a href="/projects/" class="btn-back-portfolio">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" />
                    </svg>
                    Retour au portfolio
                </a>
            </div>
        </div>
        
        <!-- Bottom Section: Project Info Block -->
        <div class="project-hero-bottom">
            <div class="project-info-grid">
                <!-- Left: Project Description Block -->
                <div class="project-description-block">
                    {{ if .Params.logo }}
                    <div class="project-logo-bottom">
                        <img src="{{ .Params.logo }}" alt="{{ .Title }}" class="project-logo-img">
                    </div>
                    {{ else }}
                    <h2 class="project-name-bottom">{{ .Title }}</h2>
                    {{ end }}
                    
                    <!-- Project Action Buttons -->
                    {{ if .Params.actions }}
                    <div class="project-actions">
                        {{ $actionsCount := len .Params.actions }}
                        {{ if le $actionsCount 2 }}
                            <!-- Afficher toutes les actions si 2 ou moins -->
                            {{ range .Params.actions }}
                            <a href="{{ .url }}" {{ if ne .url "#" }}target="_blank"{{ end }} class="project-action-button {{ if .primary }}primary{{ end }} {{ if eq .type "more" }}more-options{{ end }}">
                                {{ if eq .icon "steam" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C7.4,22 3.6,18.6 2.3,14L6.2,15.3C6.5,16.9 7.9,18 9.5,18C11.4,18 13,16.4 13,14.5C13,14.2 13,13.9 12.9,13.6L16.5,11C18.2,11 19.5,9.7 19.5,8S18.2,5 16.5,5S13.5,6.3 13.5,8V8.1L11,11.6C10.6,11.5 10.1,11.5 9.5,11.5C8.1,11.5 6.8,12.1 6,13.1L2,12C2,6.5 6.5,2 12,2M16.5,6.5A1.5,1.5 0 0,1 18,8A1.5,1.5 0 0,1 16.5,9.5A1.5,1.5 0 0,1 15,8A1.5,1.5 0 0,1 16.5,6.5M9.5,13A1.5,1.5 0 0,1 11,14.5A1.5,1.5 0 0,1 9.5,16A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 9.5,13Z" />
                                </svg>
                                {{ else if eq .icon "youtube" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z" />
                                </svg>
                                {{ else if eq .icon "github" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
                                </svg>
                                {{ else if eq .icon "download" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                                </svg>
                                {{ else if eq .icon "external" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
                                </svg>
                                {{ end }}
                                {{ .label }}
                            </a>
                            {{ end }}
                        {{ else }}
                            <!-- Afficher les 2 premières actions + bouton ... -->
                            {{ range first 2 .Params.actions }}
                            <a href="{{ .url }}" {{ if ne .url "#" }}target="_blank"{{ end }} class="project-action-button {{ if .primary }}primary{{ end }}">
                                {{ if eq .icon "steam" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C7.4,22 3.6,18.6 2.3,14L6.2,15.3C6.5,16.9 7.9,18 9.5,18C11.4,18 13,16.4 13,14.5C13,14.2 13,13.9 12.9,13.6L16.5,11C18.2,11 19.5,9.7 19.5,8S18.2,5 16.5,5S13.5,6.3 13.5,8V8.1L11,11.6C10.6,11.5 10.1,11.5 9.5,11.5C8.1,11.5 6.8,12.1 6,13.1L2,12C2,6.5 6.5,2 12,2M16.5,6.5A1.5,1.5 0 0,1 18,8A1.5,1.5 0 0,1 16.5,9.5A1.5,1.5 0 0,1 15,8A1.5,1.5 0 0,1 16.5,6.5M9.5,13A1.5,1.5 0 0,1 11,14.5A1.5,1.5 0 0,1 9.5,16A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 9.5,13Z" />
                                </svg>
                                {{ else if eq .icon "youtube" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z" />
                                </svg>
                                {{ else if eq .icon "github" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
                                </svg>
                                {{ else if eq .icon "download" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                                </svg>
                                {{ else if eq .icon "external" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
                                </svg>
                                {{ end }}
                                {{ .label }}
                            </a>
                            {{ end }}
                            <!-- Bouton ... pour plus d'options -->
                            <button class="project-action-button more-options" onclick="alert('Bouton cliqué!'); showMoreActions(this);">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <circle cx="5" cy="12" r="2"/>
                                    <circle cx="12" cy="12" r="2"/>
                                    <circle cx="19" cy="12" r="2"/>
                                </svg>
                            </button>
                            <!-- Popup des actions cachées -->
                            <div class="actions-popup" style="display: none;">
                                <div class="popup-overlay" onclick="hideMoreActions(this)"></div>
                                <div class="popup-content">
                                    <div class="popup-header">
                                        <h3>Plus d'options</h3>
                                        <button class="popup-close" onclick="hideMoreActions(this)">
                                            <svg viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                                            </svg>
                                        </button>
                                    </div>
                                    <div class="popup-actions">
                                        {{ range after 2 .Params.actions }}
                                        <a href="{{ .url }}" {{ if ne .url "#" }}target="_blank"{{ end }} class="popup-action-item">
                                            <div class="action-icon">
                                                {{ if eq .icon "steam" }}
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C7.4,22 3.6,18.6 2.3,14L6.2,15.3C6.5,16.9 7.9,18 9.5,18C11.4,18 13,16.4 13,14.5C13,14.2 13,13.9 12.9,13.6L16.5,11C18.2,11 19.5,9.7 19.5,8S18.2,5 16.5,5S13.5,6.3 13.5,8V8.1L11,11.6C10.6,11.5 10.1,11.5 9.5,11.5C8.1,11.5 6.8,12.1 6,13.1L2,12C2,6.5 6.5,2 12,2M16.5,6.5A1.5,1.5 0 0,1 18,8A1.5,1.5 0 0,1 16.5,9.5A1.5,1.5 0 0,1 15,8A1.5,1.5 0 0,1 16.5,6.5M9.5,13A1.5,1.5 0 0,1 11,14.5A1.5,1.5 0 0,1 9.5,16A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 9.5,13Z" />
                                                </svg>
                                                {{ else if eq .icon "youtube" }}
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z" />
                                                </svg>
                                                {{ else if eq .icon "github" }}
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
                                                </svg>
                                                {{ else if eq .icon "download" }}
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                                                </svg>
                                                {{ else if eq .icon "external" }}
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
                                                </svg>
                                                {{ end }}
                                            </div>
                                            <div class="action-content">
                                                <div class="action-label">{{ .label }}</div>
                                                <div class="action-type">{{ .type | title }}</div>
                                            </div>
                                        </a>
                                        {{ end }}
                                    </div>
                                </div>
                            </div>
                        {{ end }}
                    </div>
                    {{ end }}
                    
                    <div class="description-content">
                        <h3 class="description-title">Informations du projet</h3>
                        
                        <!-- Meta Information -->
                        <div class="project-meta-bottom">
                            <div class="meta-item-bottom">
                                <span class="meta-label-bottom">Date</span>
                                <span class="meta-value-bottom">{{ .Date | time.Format "January 2006" }}</span>
                            </div>
                            
                            {{ if .Params.status }}
                            <div class="meta-item-bottom">
                                <span class="meta-label-bottom">Statut</span>
                                <span class="meta-value-bottom status-{{ .Params.status | lower }}">{{ .Params.status }}</span>
                            </div>
                            {{ end }}
                            
                            {{ if .Params.sector }}
                            <div class="meta-item-bottom">
                                <span class="meta-label-bottom">Secteur</span>
                                <span class="meta-value-bottom">{{ .Params.sector }}</span>
                            </div>
                            {{ end }}
                            
                            {{ if .Params.link }}
                            <div class="meta-item-bottom">
                                <a href="{{ .Params.link }}" target="_blank" class="project-link-bottom">
                                    Voir le projet <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
                                    </svg>
                                </a>
                            </div>
                            {{ end }}
                        </div>
                        
                        <!-- Technologies Pills -->
                        {{ if .Params.technologies }}
                        <div class="project-technologies-bottom">
                            <span class="tech-label-bottom">Technologies</span>
                            <div class="tech-pills-bottom">
                                {{ range .Params.technologies }}
                                <span class="tech-pill-bottom">{{ . }}</span>
                                {{ end }}
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
                
                <!-- Right: Notable Facts -->
                {{ if .Params.notable_facts }}
                <div class="project-notable-facts-hero">
                    <div class="notable-facts-content">
                        <h3 class="notable-facts-title-hero">Faits notables</h3>
                        {{ range .Params.notable_facts }}
                        <div class="fact-card-hero">
                            <div class="fact-icon-hero {{ .type }}">{{ .icon }}</div>
                            <div class="fact-content-hero">
                                <div class="fact-value-hero">{{ .value | safeHTML }}</div>
                                <div class="fact-label-hero">{{ .label }}</div>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
                {{ end }}
            </div>
        </div>
        </div>
    </div>
    
    <!-- Scroll Indicator -->
    <div class="scroll-indicator">
        <div class="scroll-arrow"></div>
    </div>
</section>

<!-- Project Content -->
<div class="hero-to-content-transition"></div>
<article class="project-detail">
    <div class="project-detail-wrapper">
        <!-- Main Content -->
        <div class="project-content">
            {{ .Content }}
            
            <!-- Navigation -->
            <nav class="project-navigation">
                <div class="nav-links">
                    {{ with .PrevInSection }}
                    <a href="{{ .Permalink }}" class="nav-link prev">
                        <span class="nav-direction">← Projet précédent</span>
                        <span class="nav-title">{{ .Title }}</span>
                    </a>
                    {{ end }}
                    
                    {{ with .NextInSection }}
                    <a href="{{ .Permalink }}" class="nav-link next">
                        <span class="nav-direction">Projet suivant →</span>
                        <span class="nav-title">{{ .Title }}</span>
                    </a>
                    {{ end }}
                </div>
                
                <div class="back-to-projects">
                    <a href="/projects/" class="btn-secondary">← Retour aux projets</a>
                </div>
            </nav>
        </div>
        
        <!-- Sidebar with Notable Facts -->
        {{ if .Params.notable_facts }}
        <aside class="project-sidebar">
            <div class="notable-facts">
                <h3 class="notable-facts-title">Faits notables</h3>
                {{ range .Params.notable_facts }}
                <div class="fact-card">
                    <div class="fact-icon {{ .type }}">{{ .icon }}</div>
                    <div class="fact-value">{{ .value | safeHTML }}</div>
                    <div class="fact-label">{{ .label }}</div>
                </div>
                {{ end }}
            </div>
        </aside>
        {{ end }}
    </div>
</article>
{{ end }}
