{{ define "main" }}
<!-- Project Hero Section -->
{{ if .Params.image }}
<style>
    body {
        --hero-bg-image: url('{{ .Params.image }}');
    }
</style>
<script>
    // Ajouter la classe project-page au body pour g√©rer les z-index des canvas
    document.body.classList.add('project-page');
</script>
{{ end }}
<!-- Fixed Background Overlay -->
<div class="project-hero-overlay"></div>
<section class="project-hero">
    <div class="project-hero-content no-top">
        <!-- Project Info Block centr√© -->
        <div class="project-hero-bottom">
            <div class="project-info-grid">
                <!-- Left: Project Description Block -->
                <div class="project-description-block">
                    {{ if .Params.logo }}
                    <div class="project-logo-bottom">
                        <img src="{{ .Params.logo }}" alt="{{ .Title }}" class="project-logo-img">
                    </div>
                    {{ else }}
                    <h2 class="project-name-bottom">{{ .Title }}</h2>
                    {{ end }}
                    
                    <!-- Project Action Buttons -->
                    {{ if .Params.actions }}
                    <div class="project-actions">
                        {{ $actionsCount := len .Params.actions }}
                        {{ if le $actionsCount 2 }}
                            <!-- Afficher toutes les actions si 2 ou moins -->
                            {{ range .Params.actions }}
                            <a href="{{ .url }}" {{ if ne .url "#" }}target="_blank"{{ end }} class="project-action-button {{ if .primary }}primary{{ end }} {{ if eq .type "more" }}more-options{{ end }}">
                                {{ if eq .icon "steam" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C7.4,22 3.6,18.6 2.3,14L6.2,15.3C6.5,16.9 7.9,18 9.5,18C11.4,18 13,16.4 13,14.5C13,14.2 13,13.9 12.9,13.6L16.5,11C18.2,11 19.5,9.7 19.5,8S18.2,5 16.5,5S13.5,6.3 13.5,8V8.1L11,11.6C10.6,11.5 10.1,11.5 9.5,11.5C8.1,11.5 6.8,12.1 6,13.1L2,12C2,6.5 6.5,2 12,2M16.5,6.5A1.5,1.5 0 0,1 18,8A1.5,1.5 0 0,1 16.5,9.5A1.5,1.5 0 0,1 15,8A1.5,1.5 0 0,1 16.5,6.5M9.5,13A1.5,1.5 0 0,1 11,14.5A1.5,1.5 0 0,1 9.5,16A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 9.5,13Z" />
                                </svg>
                                {{ else if eq .icon "youtube" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z" />
                                </svg>
                                {{ else if eq .icon "github" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
                                </svg>
                                {{ else if eq .icon "download" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                                </svg>
                                {{ else if eq .icon "external" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
                                </svg>
                                {{ end }}
                                {{ .label }}
                            </a>
                            {{ end }}
                        {{ else }}
                            <!-- Afficher les 2 premi√®res actions + bouton ... -->
                            {{ range first 2 .Params.actions }}
                            <a href="{{ .url }}" {{ if ne .url "#" }}target="_blank"{{ end }} class="project-action-button {{ if .primary }}primary{{ end }}">
                                {{ if eq .icon "steam" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C7.4,22 3.6,18.6 2.3,14L6.2,15.3C6.5,16.9 7.9,18 9.5,18C11.4,18 13,16.4 13,14.5C13,14.2 13,13.9 12.9,13.6L16.5,11C18.2,11 19.5,9.7 19.5,8S18.2,5 16.5,5S13.5,6.3 13.5,8V8.1L11,11.6C10.6,11.5 10.1,11.5 9.5,11.5C8.1,11.5 6.8,12.1 6,13.1L2,12C2,6.5 6.5,2 12,2M16.5,6.5A1.5,1.5 0 0,1 18,8A1.5,1.5 0 0,1 16.5,9.5A1.5,1.5 0 0,1 15,8A1.5,1.5 0 0,1 16.5,6.5M9.5,13A1.5,1.5 0 0,1 11,14.5A1.5,1.5 0 0,1 9.5,16A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 9.5,13Z" />
                                </svg>
                                {{ else if eq .icon "youtube" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z" />
                                </svg>
                                {{ else if eq .icon "github" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
                                </svg>
                                {{ else if eq .icon "download" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                                </svg>
                                {{ else if eq .icon "external" }}
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
                                </svg>
                                {{ end }}
                                {{ .label }}
                            </a>
                            {{ end }}
                            <!-- Bouton ... for more options -->
                            <button class="project-action-button more-options" onclick="alert('Bouton cliqu√©!'); showMoreActions(this);">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <circle cx="5" cy="12" r="2"/>
                                    <circle cx="12" cy="12" r="2"/>
                                    <circle cx="19" cy="12" r="2"/>
                                </svg>
                            </button>
                            <!-- Popup des actions cach√©es -->
                            <div class="actions-popup" style="display: none;">
                                <div class="popup-overlay" onclick="hideMoreActions(this)"></div>
                                <div class="popup-content">
                                    <div class="popup-header">
                                        <h3>{{ i18n "more_options" | default "Plus d'options" }}</h3>
                                        <button class="popup-close" onclick="hideMoreActions(this)">
                                            <svg viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
                                            </svg>
                                        </button>
                                    </div>
                                    <div class="popup-actions">
                                        {{ range after 2 .Params.actions }}
                                        <a href="{{ .url }}" {{ if ne .url "#" }}target="_blank"{{ end }} class="popup-action-item">
                                            <div class="action-icon">
                                                {{ if eq .icon "steam" }}
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C7.4,22 3.6,18.6 2.3,14L6.2,15.3C6.5,16.9 7.9,18 9.5,18C11.4,18 13,16.4 13,14.5C13,14.2 13,13.9 12.9,13.6L16.5,11C18.2,11 19.5,9.7 19.5,8S18.2,5 16.5,5S13.5,6.3 13.5,8V8.1L11,11.6C10.6,11.5 10.1,11.5 9.5,11.5C8.1,11.5 6.8,12.1 6,13.1L2,12C2,6.5 6.5,2 12,2M16.5,6.5A1.5,1.5 0 0,1 18,8A1.5,1.5 0 0,1 16.5,9.5A1.5,1.5 0 0,1 15,8A1.5,1.5 0 0,1 16.5,6.5M9.5,13A1.5,1.5 0 0,1 11,14.5A1.5,1.5 0 0,1 9.5,16A1.5,1.5 0 0,1 8,14.5A1.5,1.5 0 0,1 9.5,13Z" />
                                                </svg>
                                                {{ else if eq .icon "youtube" }}
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z" />
                                                </svg>
                                                {{ else if eq .icon "github" }}
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
                                                </svg>
                                                {{ else if eq .icon "download" }}
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                                                </svg>
                                                {{ else if eq .icon "external" }}
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
                                                </svg>
                                                {{ end }}
                                            </div>
                                            <div class="action-content">
                                                <div class="action-label">{{ .label }}</div>
                                                <div class="action-type">{{ .type | title }}</div>
                                            </div>
                                        </a>
                                        {{ end }}
                                    </div>
                                </div>
                            </div>
                        {{ end }}
                    </div>
                    {{ end }}
                    
                    <div class="description-content">
                        <h3 class="description-title">{{ i18n "project_information" | default "Informations du projet" }}</h3>
                        
                        <!-- Meta Information -->
                        <div class="project-meta-bottom">
                            <div class="meta-item-bottom">
                                <span class="meta-label-bottom">{{ i18n "date" | default "Date" }}</span>
                                <span class="meta-value-bottom">{{ .Date.Format (.Site.Data.config.blog.dateFormat | default "Jan 2006") }}</span>
                            </div>
                            
                            {{ if .Params.status }}
                            <div class="meta-item-bottom">
                                <span class="meta-label-bottom">{{ i18n "status" | default "Statut" }}</span>
                                <span class="meta-value-bottom status-{{ .Params.status | lower }}">{{ .Params.status }}</span>
                            </div>
                            {{ end }}
                            
                            {{ if .Params.sector }}
                            <div class="meta-item-bottom">
                                <span class="meta-label-bottom">{{ i18n "sector" | default "Secteur" }}</span>
                                <span class="meta-value-bottom">{{ .Params.sector }}</span>
                            </div>
                            {{ end }}
                            
                            {{ if .Params.link }}
                            <div class="meta-item-bottom">
                                <a href="{{ .Params.link }}" target="_blank" class="project-link-bottom">
                                    {{ i18n "see_project" | default "Voir le projet" }} <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
                                    </svg>
                                </a>
                            </div>
                            {{ end }}
                        </div>
                        
                        <!-- Technologies Pills -->
                        {{ partial "project-technologies-detailed.html" . }}
                    </div>
                </div>
                
                <!-- Right: Notable Facts -->
                {{ if .Params.notable_facts }}
                <div class="project-notable-facts-hero">
                    <div class="notable-facts-content">
                        <h3 class="notable-facts-title-hero">{{ i18n "notable_facts" | default "Faits notables" }}</h3>
                        {{ range .Params.notable_facts }}
                        <div class="fact-card-hero">
                            <div class="fact-icon-hero {{ .type }}">{{ .icon }}</div>
                            <div class="fact-content-hero">
                                <div class="fact-value-hero">{{ .value | safeHTML }}</div>
                                <div class="fact-label-hero">{{ .label }}</div>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
                {{ end }}
            </div>
        </div>
        </div>
    </div>
    
    <!-- Scroll Indicator -->
    <div class="scroll-indicator">
        <div class="scroll-arrow"></div>
    </div>
</section>

<!-- Project Info Boxes Section - Section distincte avant le contenu -->
{{ $showPortfolioWidgets := true }}
{{ if or .Params.contributors .Params.development_time .Params.gallery .Params.galleries .Params.youtube_videos .Params.youtube_galleries .Params.youtube_singles .Params.programming_languages .Params.frameworks_engines .Params.technical_specs .Params.awards $showPortfolioWidgets }}
<section class="project-info-boxes-section">
    <div class="project-info-boxes-wrapper">
        <div class="project-info-boxes">
            <!-- Contributors Box -->
            {{ if .Params.contributors }}
            <div class="info-box contributors-box {{ .Params.contributors_size | default "size-medium" }}">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon contributors">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16,4C16.88,4 17.67,4.25 18.31,4.69C19.75,5.81 20,7.75 19.19,9.19C18.8,9.88 18.25,10.5 17.56,10.94C18.61,11.5 19.5,12.3 20.13,13.38C21.38,15.5 20.75,18.13 18.63,19.38C18,19.75 17.25,20 16.5,20H7.5C5.56,20 4,18.44 4,16.5V15.5C4,14.4 4.4,13.36 5.09,12.53C5.79,11.71 6.75,11.16 7.81,11.06C7.28,10.5 7,9.78 7,9C7,7.34 8.34,6 10,6C10.35,6 10.69,6.06 11,6.17C11.31,4.88 12.11,3.86 13.2,3.38C14.22,2.93 15.36,2.93 16.4,3.38C16.27,3.59 16.14,3.8 16,4M10,8C9.45,8 9,8.45 9,9C9,9.55 9.45,10 10,10C10.55,10 11,9.55 11,9C11,8.45 10.55,8 10,8M16.5,6C15.67,6 15,6.67 15,7.5C15,8.33 15.67,9 16.5,9C17.33,9 18,8.33 18,7.5C18,6.67 17.33,6 16.5,6Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">{{ i18n "contributors" | default "Contributeurs" }}</h3>
                        <div class="info-box-summary">{{ len .Params.contributors }} contributeur{{ if gt (len .Params.contributors) 1 }}s{{ end }}</div>
                        <!-- Aper√ßu des avatars -->
                        <div class="contributors-preview">
                            <div class="contributor-avatars">
                                {{ range first 4 .Params.contributors }}
                                {{ $person := partial "helpers/get-person.html" (dict "context" $ "personId" .person) }}
                                {{ if $person }}
                                <div class="contributor-avatar-mini {{ if not $person.Params.avatar }}placeholder{{ end }}{{ if $person }} clickable-person{{ end }}"{{ if $person }} data-person-id="{{ .person }}" title="Voir le profil de {{ $person.Params.title }}"{{ end }}>
                                    {{ if $person.Params.avatar }}
                                    <img src="{{ $person.Params.avatar }}" alt="{{ $person.Params.title }}">
                                    {{ else }}
                                    <span>{{ substr $person.Params.title 0 1 | upper }}</span>
                                    {{ end }}
                                {{ end }}
                                </div>
                                {{ end }}
                                {{ if gt (len .Params.contributors) 4 }}
                                <div class="contributor-avatar-mini placeholder">
                                    <span>+{{ sub (len .Params.contributors) 4 }}</span>
                                </div>
                                {{ end }}
                            </div>
                        </div>
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="contributors-list">
                        {{ range .Params.contributors }}
                        {{ $person := partial "helpers/get-person.html" (dict "context" $ "personId" .person) }}
                        {{ if $person }}
                        <div class="contributor-item{{ if $person }} clickable-person{{ end }}"{{ if $person }} data-person-id="{{ .person }}" title="Voir le profil de {{ $person.Params.title }}"{{ end }}>
                            {{ if $person.Params.avatar }}
                            <div class="contributor-avatar">
                                <img src="{{ $person.Params.avatar }}" alt="{{ $person.Params.title }}">
                            </div>
                            {{ else }}
                            <div class="contributor-avatar placeholder">
                                <span>{{ substr $person.Params.title 0 1 | upper }}</span>
                            </div>
                            {{ end }}
                            <div class="contributor-info">
                                <div class="contributor-name">{{ $person.Params.title }}</div>
                                {{ if .role }}
                                <div class="contributor-role">{{ .role }}</div>
                                {{ end }}
                            </div>
                        </div>
                        {{ end }}
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Development Time Box -->
            {{ if .Params.development_time }}
            <div class="info-box development-time-box {{ .Params.development_time_size | default "size-medium" }}">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon time">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">{{ i18n "development_time" | default "Temps de d√©veloppement" }}</h3>
                        <div class="info-box-summary">{{ .Params.development_time.total }}</div>
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="development-time-content">
                        <div class="time-stat">
                            <div class="time-value">{{ .Params.development_time.total }}</div>
                            <div class="time-label">{{ i18n "total_time" | default "Temps total" }}</div>
                        </div>
                        {{ if .Params.development_time.start_date }}
                        <div class="time-stat">
                            <div class="time-value">{{ .Params.development_time.start_date }}</div>
                            <div class="time-label">{{ i18n "project_start" | default "D√©but du projet" }}</div>
                        </div>
                        {{ end }}
                        {{ if .Params.development_time.end_date }}
                        <div class="time-stat">
                            <div class="time-value">{{ .Params.development_time.end_date }}</div>
                            <div class="time-label">{{ i18n "project_end" | default "Fin du projet" }}</div>
                        </div>
                        {{ end }}
                        {{ if .Params.development_time.phases }}
                        <div class="time-phases">
                            {{ range .Params.development_time.phases }}
                            <div class="phase-item">
                                <div class="phase-name">{{ .name }}</div>
                                <div class="phase-duration">{{ .duration }}</div>
                            </div>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Project Gallery Box -->
            {{ if .Params.gallery }}
            <div class="info-box gallery-box {{ .Params.gallery_size | default "size-large" }}" onclick="toggleInfoBox(this)">
                <!-- Gallery Preview Background pour l'√©tat ferm√© -->
                <div class="gallery-preview gallery-background"
                     style="--count: {{ len .Params.gallery }}; background-image: url('{{ (index .Params.gallery 0).url }}'); background-size: cover; background-position: center;">
                    <div class="gallery-carousel">
                        {{ range $idx, $img := .Params.gallery }}
                        <div class="gallery-mini-item" style="--i: {{$idx}};">
                            <img src="{{ $img.url }}" alt="{{ $img.caption }}" loading="lazy">
                        </div>
                        {{ end }}
                    </div>
                </div>
                
                <div class="info-box-header">
                    <div class="info-box-icon gallery">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">Galerie du projet</h3>
                        <div class="info-box-summary">{{ len .Params.gallery }} image{{ if gt (len .Params.gallery) 1 }}s{{ end }}</div>
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="gallery-grid">
                        {{ range .Params.gallery }}
                        <div class="gallery-item" onclick="openImageModal('{{ .url }}', '{{ .caption }}')">
                            <img src="{{ .url }}" alt="{{ .caption }}" loading="lazy">
                            <div class="gallery-overlay">
                                <div class="gallery-zoom-icon">
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                    </svg>
                                </div>
                            </div>
                            {{ if .caption }}
                            <div class="gallery-caption">{{ .caption }}</div>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Technical Specifications Box -->
            {{ $hasProgLang := .Params.programming_languages }}
            {{ $hasFrameworks := .Params.frameworks_engines }}
            {{ $hasTechSpecs := .Params.technical_specs }}
            {{ if or (and $hasProgLang (gt (len $hasProgLang) 0)) (and $hasFrameworks (gt (len $hasFrameworks) 0)) (and $hasTechSpecs (gt (len $hasTechSpecs) 0)) }}
            <div class="info-box technical-specs-box expanded {{ .Params.technical_specs_size | default "size-medium" }}">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon technical">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14.19,14.19L6,18L9.81,9.81L18,6M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,10.9A1.1,1.1 0 0,0 10.9,12A1.1,1.1 0 0,0 12,13.1A1.1,1.1 0 0,0 13.1,12A1.1,1.1 0 0,0 12,10.9Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">Sp√©cifications techniques</h3>
                        {{ $progLangCount := 0 }}
                        {{ $frameworksCount := 0 }}
                        {{ $techSpecsCount := 0 }}
                        {{ if $hasProgLang }}{{ $progLangCount = len $hasProgLang }}{{ end }}
                        {{ if $hasFrameworks }}{{ $frameworksCount = len $hasFrameworks }}{{ end }}
                        {{ if $hasTechSpecs }}{{ $techSpecsCount = len $hasTechSpecs }}{{ end }}
                        {{ $totalCount := add (add $progLangCount $frameworksCount) $techSpecsCount }}
                        <div class="info-box-summary">{{ $totalCount }} sp√©cification{{ if gt $totalCount 1 }}s{{ end }}</div>
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="technical-specs-list">
                        {{/* Langages de programmation automatiques */}}
                        {{ if $hasProgLang }}
                        <div class="spec-item">
                            <div class="spec-label">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6Z"/>
                                </svg>
                                {{ i18n "programming_languages" | default "Langages de programmation" }}
                            </div>
                            <div class="spec-value">
                                {{ partial "project-tech-specs.html" (dict "TechType" "programming_languages" "TechList" $hasProgLang "Site" .Site) }}
                            </div>
                        </div>
                        {{ end }}
                        {{/* Frameworks et moteurs automatiques */}}
                        {{ if $hasFrameworks }}
                        <div class="spec-item">
                            <div class="spec-label">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                                </svg>
                                {{ i18n "frameworks_engines" | default "Frameworks & Moteurs" }}
                            </div>
                            <div class="spec-value">
                                {{ partial "project-tech-specs.html" (dict "TechType" "frameworks_engines" "TechList" $hasFrameworks "Site" .Site) }}
                            </div>
                        </div>
                        {{ end }}
                        {{/* Sp√©cifications techniques personnalis√©es */}}
                        {{ if $hasTechSpecs }}
                        {{ range $hasTechSpecs }}
                        <div class="spec-item">
                            <div class="spec-label">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14.19,14.19L6,18L9.81,9.81L18,6M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,10.9A1.1,1.1 0 0,0 10.9,12A1.1,1.1 0 0,0 12,13.1A1.1,1.1 0 0,0 13.1,12A1.1,1.1 0 0,0 12,10.9Z"/>
                                </svg>
                                {{ .label }}
                            </div>
                            <div class="spec-value">{{ .value }}</div>
                        </div>
                        {{ end }}
                        {{ end }}
                    </div>
                    {{ if or $hasProgLang $hasFrameworks }}
                    <div class="tech-specs-hint">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"/>
                        </svg>
                        Cliquez sur les technologies pour voir les d√©tails et projets associ√©s
                    </div>
                    {{ end }}
                </div>
            </div>
            {{ end }}

            <!-- Mes Sp√©cialit√©s utilis√©es dans ce projet -->
            {{ if .Params.specialties }}
            {{ $projectSpecialities := .Params.specialties }}
            {{ $allSpecialities := site.Data.specialties }}
            {{ $usedSpecialities := slice }}
            {{ range $projectSpecialities }}
            {{ $specialty := . }}
            {{ range $allSpecialities }}
            {{ if eq .name $specialty }}
            {{ $usedSpecialities = $usedSpecialities | append . }}
            {{ end }}
            {{ end }}
            {{ end }}
            {{ if $usedSpecialities }}
            <div class="info-box developer-specialties-box size-medium">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon specialties">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2L13.09,8.26L22,9L13.09,9.74L12,16L10.91,9.74L2,9L10.91,8.26L12,2M12,21.5C12.83,21.5 13.5,20.83 13.5,20C13.5,19.17 12.83,18.5 12,18.5C11.17,18.5 10.5,19.17 10.5,20C10.5,20.83 11.17,21.5 12,21.5Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">Sp√©cialit√©s utilis√©es</h3>
                        <div class="info-box-summary">{{ len $usedSpecialities }} domaine{{ if gt (len $usedSpecialities) 1 }}s{{ end }} appliqu√©{{ if gt (len $usedSpecialities) 1 }}s{{ end }}</div>
                        <!-- Aper√ßu des sp√©cialit√©s -->
                        <div class="specialties-preview">
                            <div class="specialty-badges-preview">
                                {{ range first 3 $usedSpecialities }}
                                <div class="specialty-badge-mini clickable" onclick="openSkillModal('{{ .name }}', '{{ .icon }}', 'Sp√©cialit√©', '{{ .experience }} an{{ if gt .experience 1 }}s{{ end }}', 'emoji')" title="Cliquez pour voir les d√©tails">
                                    <span class="specialty-icon">{{ .icon }}</span>
                                    <span class="specialty-name">{{ .name }}</span>
                                </div>
                                {{ end }}
                                {{ if gt (len $usedSpecialities) 3 }}
                                <div class="specialty-badge-mini more">
                                    <span class="specialty-more">+{{ sub (len $usedSpecialities) 3 }}</span>
                                </div>
                                {{ end }}
                            </div>
                        </div>
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="developer-profile-note">
                        <div class="profile-avatar">
                            <img src="{{ site.Data.profile.media.profileImage }}" alt="{{ site.Data.profile.personal.fullName }}">
                        </div>
                        <div class="profile-note-content">
                            <div class="profile-note-title">Sp√©cialit√©s de {{ site.Data.profile.personal.firstName }} pour ce projet</div>
                            <div class="profile-note-subtitle">{{ site.Data.profile.personal.title }}</div>
                        </div>
                    </div>
                    <div class="specialties-grid">
                        {{ range $usedSpecialities }}
                        <div class="specialty-item clickable" onclick="openSkillModal('{{ .name }}', '{{ .icon }}', 'Sp√©cialit√©', '{{ .experience }} an{{ if gt .experience 1 }}s{{ end }}', 'emoji')" title="Cliquez pour voir les d√©tails">
                            <div class="specialty-header">
                                <div class="specialty-icon">{{ .icon }}</div>
                                <div class="specialty-info">
                                    <div class="specialty-name">{{ .name }}</div>
                                    <div class="specialty-subtitle">{{ .subtitle }}</div>
                                </div>
                            </div>
                            <div class="specialty-experience">
                                <div class="experience-text">{{ .experience }} an{{ if gt .experience 1 }}s{{ end }}</div>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}
            {{ end }}

            <!-- Mes Outils utilis√©s dans ce projet -->
            {{ if .Params.tools }}
            {{ $projectTools := .Params.tools }}
            {{ $allTools := site.Data.tools }}
            {{ $usedTools := slice }}
            {{ range $projectTools }}
            {{ $tool := . }}
            {{ range $allTools }}
            {{ if eq .name $tool }}
            {{ $usedTools = $usedTools | append . }}
            {{ end }}
            {{ end }}
            {{ end }}
            {{ if $usedTools }}
            <div class="info-box developer-tools-box size-large">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon tools">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M22.7,19L13.6,9.9C14.5,7.6 14,4.9 12.1,3C10.1,1 7.1,0.6 4.7,1.7L9,6L6,9L1.6,4.7C0.4,7.1 0.9,10.1 2.9,12.1C4.8,14 7.5,14.5 9.8,13.6L18.9,22.7C19.3,23.1 19.9,23.1 20.3,22.7L22.6,20.4C23.1,20 23.1,19.3 22.7,19Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">Outils utilis√©s</h3>
                        <div class="info-box-summary">{{ len $usedTools }} outil{{ if gt (len $usedTools) 1 }}s{{ end }} employ√©{{ if gt (len $usedTools) 1 }}s{{ end }}</div>
                        <!-- Aper√ßu des outils -->
                        <div class="tools-preview">
                            <div class="tool-icons-preview">
                                {{ range first 5 $usedTools }}
                                <div class="tool-icon-mini clickable" onclick="openSkillModal('{{ .name }}', '/{{ .iconPath }}', 'Outil', '{{ .experience }} an{{ if gt .experience 1 }}s{{ end }}', 'svg')" title="{{ .name }} - Cliquez pour voir les d√©tails">
                                    {{ if .iconPath }}
                                    <img src="/{{ .iconPath }}" alt="{{ .name }}">
                                    {{ else }}
                                    <span>{{ substr .name 0 2 | upper }}</span>
                                    {{ end }}
                                </div>
                                {{ end }}
                                {{ if gt (len $usedTools) 5 }}
                                <div class="tool-icon-mini more">
                                    <span>+{{ sub (len $usedTools) 5 }}</span>
                                </div>
                                {{ end }}
                            </div>
                        </div>
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="developer-profile-note">
                        <div class="profile-avatar">
                            <img src="{{ site.Data.profile.media.profileImage }}" alt="{{ site.Data.profile.personal.fullName }}">
                        </div>
                        <div class="profile-note-content">
                            <div class="profile-note-title">Stack technique de {{ site.Data.profile.personal.firstName }} pour ce projet</div>
                            <div class="profile-note-subtitle">{{ site.Data.profile.personal.title }}</div>
                        </div>
                    </div>
                    <div class="tools-by-category">
                        {{ $categories := dict 
                            "ide" "Environnements de D√©veloppement"
                            "version_control" "Gestion de Versions"
                            "cloud" "Cloud & D√©ploiement"
                            "quality_tools" "Outils de Qualit√©"
                            "design" "Design & Graphisme"
                            "communication" "Communication & Collaboration"
                            "other" "Autres Outils"
                        }}
                        {{ range $category, $categoryName := $categories }}
                        {{ $categoryTools := where $usedTools "category" $category }}
                        {{ if $categoryTools }}
                        <div class="tools-category">
                            <h4 class="tools-category-title">{{ $categoryName }}</h4>
                            <div class="tools-grid">
                                {{ range $categoryTools }}
                                <div class="tool-item clickable" onclick="openSkillModal('{{ .name }}', '/{{ .iconPath }}', 'Outil', '{{ .experience }} an{{ if gt .experience 1 }}s{{ end }}', 'svg')" title="Cliquez pour voir les d√©tails">
                                    <div class="tool-header">
                                        <div class="tool-icon" {{ if .color }}style="--tool-color: {{ .color }}"{{ end }}>
                                            {{ if .iconPath }}
                                            <img src="/{{ .iconPath }}" alt="{{ .name }}">
                                            {{ else }}
                                            <span>{{ substr .name 0 2 | upper }}</span>
                                            {{ end }}
                                        </div>
                                        <div class="tool-info">
                                            <div class="tool-name">{{ .name }}</div>
                                            <div class="tool-description">{{ .description }}</div>
                                        </div>
                                    </div>
                                    <div class="tool-experience">
                                        <div class="experience-text">{{ .experience }} an{{ if gt .experience 1 }}s{{ end }}</div>
                                    </div>
                                </div>
                                {{ end }}
                            </div>
                        </div>
                        {{ end }}
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}
            {{ end }}

            <!-- Awards/Recognition Box -->
            {{ if .Params.awards }}
            <div class="info-box awards-box {{ .Params.awards_size | default "size-medium" }}">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon awards">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5,16L3,5H5.5L7,14L8.5,5H11L12.5,14L14,5H16.5L14.5,16H12L10.5,7L9,16H5M19,5H21V7H19V5M19,8H21V16H19V8M19,17H21V19H19V17Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">R√©compenses & Reconnaissance</h3>
                        <div class="info-box-summary">{{ len .Params.awards }} r√©compense{{ if gt (len .Params.awards) 1 }}s{{ end }}</div>
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="awards-list">
                        {{ range .Params.awards }}
                        <div class="award-item">
                            <div class="award-icon">üèÜ</div>
                            <div class="award-info">
                                <div class="award-title">{{ .title }}</div>
                                {{ if .organization }}
                                <div class="award-organization">{{ .organization }}</div>
                                {{ end }}
                                {{ if .date }}
                                <div class="award-date">{{ .date }}</div>
                                {{ end }}
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Testimonials Box -->
            {{ if .Params.testimonials }}
            <div class="info-box widget-testimonials-box {{ .Params.testimonials_size | default "size-large" }}">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">T√©moignages</h3>
                        <!-- Aper√ßu rotatif des testimonials -->
                        {{ if .Params.testimonials }}
                        <div class="widget-testimonials-preview">
                            <div class="widget-testimonials-rotator">
                                {{ range $index, $testimonial := .Params.testimonials }}
                                {{ $person := partial "helpers/get-person.html" (dict "context" $ "personId" $testimonial.person) }}
                                {{ if $person }}
                                <div class="widget-testimonial-preview-item {{ if eq $index 0 }}active{{ end }}" data-index="{{ $index }}">
                                    <div class="widget-testimonial-preview-header{{ if $person }} clickable-person{{ end }}"{{ if $person }} data-person-id="{{ $testimonial.person }}" title="Voir le profil de {{ $person.Params.title }}"{{ end }}>
                                        <div class="widget-testimonial-preview-avatar {{ if not $person.Params.avatar }}placeholder{{ end }}">
                                            {{ if $person.Params.avatar }}
                                            <img src="{{ $person.Params.avatar }}" alt="{{ $person.Params.title }}">
                                            {{ else }}
                                            <span>{{ substr $person.Params.title 0 1 | upper }}</span>
                                            {{ end }}
                                        </div>
                                        <div class="widget-testimonial-preview-author">{{ $person.Params.title }}{{ if $testimonial.role }}, {{ $testimonial.role }}{{ end }}</div>
                                    </div>
                                <div class="widget-testimonial-preview-quote">{{ $testimonial.quote }}</div>
                                </div>
                                {{ end }}
                                {{ end }}
                            </div>
                            <div class="widget-testimonials-progress"></div>
                        </div>
                        {{ end }}
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="widget-testimonials-list">
                        {{ range .Params.testimonials }}
                        {{ $person := partial "helpers/get-person.html" (dict "context" $ "personId" .person) }}
                        {{ if $person }}
                        <div class="widget-testimonial-item">
                        <div class="widget-testimonial-quote">{{ .quote }}</div>
                            <div class="widget-testimonial-author{{ if $person }} clickable-person{{ end }}"{{ if $person }} data-person-id="{{ .person }}" title="Voir le profil de {{ $person.Params.title }}"{{ end }}>
                                <div class="widget-testimonial-avatar {{ if not $person.Params.avatar }}placeholder{{ end }}">
                                    {{ if $person.Params.avatar }}
                                    <img src="{{ $person.Params.avatar }}" alt="{{ $person.Params.title }}">
                                    {{ else }}
                                    <span>{{ substr $person.Params.title 0 1 | upper }}</span>
                                    {{ end }}
                                </div>
                                <div class="widget-testimonial-info">
                                    <div class="widget-testimonial-name">{{ $person.Params.title }}</div>
                                    {{ if .role }}
                                    <div class="widget-testimonial-role">{{ .role }}</div>
                                    {{ end }}
                                </div>
                            </div>
                        </div>
                        {{ end }}
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- YouTube Videos Box -->
            {{ if .Params.youtube_videos }}
            <div class="info-box youtube-box {{ .Params.youtube_size | default "size-large" }} expanded">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon youtube">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">Vid√©os YouTube</h3>
                        <div class="info-box-summary">{{ len .Params.youtube_videos }} vid√©o{{ if gt (len .Params.youtube_videos) 1 }}s{{ end }}</div>
                        <!-- Aper√ßu de la premi√®re vid√©o -->
                        {{ if .Params.youtube_videos }}
                        {{ $firstVideo := index .Params.youtube_videos 0 }}
                        <div class="youtube-preview" onclick="openYouTubeModal('{{ $firstVideo.video_id }}', '{{ $firstVideo.title }}'); event.stopPropagation();" data-video-id="{{ $firstVideo.video_id }}" data-video-title="{{ $firstVideo.title }}">
                            <div class="youtube-preview-thumbnail">
                                <img src="https://img.youtube.com/vi/{{ $firstVideo.video_id }}/mqdefault.jpg" alt="{{ $firstVideo.title }}">
                                <div class="youtube-preview-play"></div>
                            </div>
                            <div class="youtube-preview-info">
                                <div class="youtube-preview-title">{{ $firstVideo.title }}</div>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="youtube-list">
                        {{ range .Params.youtube_videos }}
                        <div class="youtube-item" onclick="event.stopPropagation(); openYouTubeModal('{{ .video_id }}', '{{ .title }}')">
                            <div class="youtube-thumbnail">
                                <img src="https://img.youtube.com/vi/{{ .video_id }}/maxresdefault.jpg" alt="{{ .title }}">
                                <div class="youtube-play-button"></div>
                                {{ if .duration }}
                                <div class="youtube-duration">{{ .duration }}</div>
                                {{ end }}
                            </div>
                            <div class="youtube-info">
                                <h4 class="youtube-title">{{ .title }}</h4>
                                {{ if .description }}
                                <p class="youtube-description">{{ .description }}</p>
                                {{ end }}
                                <div class="youtube-meta">
                                    {{ if .date }}
                                    <div class="youtube-date">
                                        <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V8H19V19Z"/>
                                        </svg>
                                        {{ .date }}
                                    </div>
                                    {{ end }}
                                </div>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- YouTube Single Video Box -->
            {{ if .Params.youtube_single }}
            <div class="info-box youtube-single-box {{ .Params.youtube_single_size | default "size-medium" }}">
                <div class="info-box-content">
                    <div class="youtube-single-item" onclick="event.stopPropagation(); openYouTubeModal('{{ .Params.youtube_single.video_id }}', '{{ .Params.youtube_single.title }}')">
                        <div class="youtube-single-thumbnail">
                            <img src="https://img.youtube.com/vi/{{ .Params.youtube_single.video_id }}/maxresdefault.jpg" alt="{{ .Params.youtube_single.title }}">
                            <div class="youtube-single-play-button"></div>
                            {{ if .Params.youtube_single.duration }}
                            <div class="youtube-single-duration">{{ .Params.youtube_single.duration }}</div>
                            {{ end }}
                        </div>
                        <div class="youtube-single-info">
                            <h4 class="youtube-single-title">{{ .Params.youtube_single.title }}</h4>
                            {{ if .Params.youtube_single.description }}
                            <p class="youtube-single-description">{{ .Params.youtube_single.description }}</p>
                            {{ end }}
                            <div class="youtube-single-meta">
                                {{ if .Params.youtube_single.date }}
                                <div class="youtube-single-date">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V8H19V19Z"/>
                                    </svg>
                                    {{ .Params.youtube_single.date }}
                                </div>
                                {{ end }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Clients Box -->
            {{ if .Params.clients }}
            <div class="info-box clients-box {{ .Params.clients_size | default "size-medium" }}">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon clients">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,7V3H2V21H22V7H12M6,19H4V17H6V19M6,15H4V13H6V15M6,11H4V9H6V11M6,7H4V5H6V7M10,19H8V17H10V19M10,15H8V13H10V15M10,11H8V9H10V11M10,7H8V5H10V7M20,19H12V17H20V19M20,15H12V13H20V15M20,11H12V9H20V11Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">Clients</h3>
                        <div class="info-box-summary">{{ len .Params.clients }} entreprise{{ if gt (len .Params.clients) 1 }}s{{ end }}</div>
                        <!-- Aper√ßu des logos -->
                        {{ if .Params.clients }}
                        <div class="clients-preview">
                            <div class="clients-preview-logos">
                                {{ range first 4 .Params.clients }}
                                <div class="client-logo-mini {{ if not .logo }}placeholder{{ end }}">
                                    {{ if .logo }}
                                    <img src="{{ .logo }}" alt="{{ .name }}">
                                    {{ else }}
                                    <span>{{ substr .name 0 1 | upper }}</span>
                                    {{ end }}
                                </div>
                                {{ end }}
                            </div>
                            {{ if gt (len .Params.clients) 4 }}
                            <div class="clients-preview-more">+{{ sub (len .Params.clients) 4 }} autres</div>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="clients-list">
                        {{ range .Params.clients }}
                        <div class="client-item">
                            <div class="client-logo {{ if not .logo }}placeholder{{ end }}">
                                {{ if .logo }}
                                <img src="{{ .logo }}" alt="{{ .name }}">
                                {{ else }}
                                <span>{{ substr .name 0 1 | upper }}</span>
                                {{ end }}
                            </div>
                            <div class="client-info">
                                <div class="client-name">{{ .name }}</div>
                                {{ if .description }}
                                <div class="client-description">{{ .description }}</div>
                                {{ end }}
                                {{ if .role }}
                                <div class="client-role">{{ .role }}</div>
                                {{ end }}
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Grade Box -->
            {{ if .Params.grade }}
            <div class="info-box grade-box {{ .Params.grade_size | default "size-small" }}">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon grade">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19,3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M19,19H5V5H19V19M17,17H7V15H17V17M17,13H7V11H17V13M17,9H7V7H17V9Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">Note acad√©mique</h3>
                        <div class="info-box-summary">{{ .Params.grade.subject | default "√âvaluation" }}</div>
                        <!-- Aper√ßu de la note -->
                        <div class="grade-preview">
                            <div class="grade-preview-value">{{ .Params.grade.value }}</div>
                            <div class="grade-preview-info">
                                <div class="grade-preview-subject">{{ .Params.grade.subject }}</div>
                                <div class="grade-preview-scale">/ {{ .Params.grade.scale }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="grade-content">
                        <div class="grade-display">
                            <div class="grade-value">{{ .Params.grade.value }}</div>
                            <div class="grade-scale">/ {{ .Params.grade.scale }}</div>
                        </div>
                        <div class="grade-details">
                            <div class="grade-subject">{{ .Params.grade.subject }}</div>
                            {{ if .Params.grade.professor }}
                            <div class="grade-professor">Professeur : {{ .Params.grade.professor }}</div>
                            {{ end }}
                            {{ if .Params.grade.date }}
                            <div class="grade-date">{{ .Params.grade.date }}</div>
                            {{ end }}
                            {{ if .Params.grade.comment }}
                            <div class="grade-comment">{{ .Params.grade.comment }}</div>
                            {{ end }}
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Downloads Box -->
            {{ if .Params.downloads }}
            <div class="info-box downloads-box {{ .Params.downloads_size | default "size-medium" }}">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon downloads">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">T√©l√©chargements</h3>
                        <div class="info-box-summary">{{ .Params.downloads.total | default 0 }} t√©l√©chargements</div>
                        <!-- Aper√ßu des t√©l√©chargements -->
                        <div class="downloads-preview">
                            <div class="downloads-preview-value">{{ .Params.downloads.total }}</div>
                            <div class="downloads-preview-info">
                                <div class="downloads-preview-label">T√©l√©chargements</div>
                                {{ if .Params.downloads.last_updated }}
                                <div class="downloads-preview-date">{{ .Params.downloads.last_updated }}</div>
                                {{ end }}
                            </div>
                        </div>
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="downloads-content">
                        <div class="downloads-display">
                            <div class="downloads-value">{{ .Params.downloads.total }}</div>
                            <div class="downloads-label">T√©l√©chargements</div>
                        </div>
                        {{ if .Params.downloads.platforms }}
                        <div class="downloads-details">
                            {{ range .Params.downloads.platforms }}
                            <div class="downloads-platform">
                                <div class="downloads-platform-name">{{ .name }}</div>
                                <div class="downloads-platform-count">{{ .count }}</div>
                            </div>
                            {{ end }}
                        </div>
                        {{ end }}
                        {{ if .Params.downloads.last_updated }}
                        <div class="downloads-last-updated">Derni√®re mise √† jour : {{ .Params.downloads.last_updated }}</div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Ranking Box -->
            {{ if .Params.ranking }}
            <div class="info-box ranking-box {{ .Params.ranking_size | default "size-small" }}">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon ranking">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5,16L3,5H11L9,16H5M10,4V1H14V4H10M14,16L12,5H20L18,16H14Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">Classement</h3>
                        <div class="info-box-summary">{{ .Params.ranking.event | default "Concours" }}</div>
                        <!-- Aper√ßu du classement -->
                        <div class="ranking-preview">
                            <div class="ranking-preview-position" data-suffix="{{ .Params.ranking.suffix | default "√®" }}">{{ .Params.ranking.position }}</div>
                            <div class="ranking-preview-info">
                                <div class="ranking-preview-event">{{ .Params.ranking.event }}</div>
                                <div class="ranking-preview-total">/ {{ .Params.ranking.total }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="ranking-content">
                        <div class="ranking-display">
                            <div class="ranking-position" data-suffix="{{ .Params.ranking.suffix | default "√®" }}">{{ .Params.ranking.position }}</div>
                            <div class="ranking-total">/ {{ .Params.ranking.total }}</div>
                        </div>
                        <div class="ranking-details">
                            <div class="ranking-event">{{ .Params.ranking.event }}</div>
                            {{ if .Params.ranking.category }}
                            <div class="ranking-category">{{ .Params.ranking.category }}</div>
                            {{ end }}
                            {{ if .Params.ranking.date }}
                            <div class="ranking-date">{{ .Params.ranking.date }}</div>
                            {{ end }}
                            {{ if .Params.ranking.achievement }}
                            <div class="ranking-achievement">{{ .Params.ranking.achievement }}</div>
                            {{ end }}
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Multiple Galleries Boxes -->
            {{ range $galleryIndex, $gallery := .Params.galleries }}
            <div class="info-box gallery-box multiple-gallery-{{ $galleryIndex }} {{ $gallery.size | default "size-large" }}" onclick="toggleInfoBox(this)">
                <!-- Gallery Preview Background pour l'√©tat ferm√© -->
                <div class="gallery-preview gallery-background"
                     style="--count: {{ len $gallery.images }}; background-image: url('{{ (index $gallery.images 0).url }}'); background-size: cover; background-position: center;">
                    <div class="gallery-carousel">
                        {{ range $idx, $img := $gallery.images }}
                        <div class="gallery-mini-item" style="--i: {{$idx}};">
                            <img src="{{ $img.url }}" alt="{{ $img.caption }}" loading="lazy">
                        </div>
                        {{ end }}
                    </div>
                </div>
                
                <div class="info-box-header">
                    <div class="info-box-icon gallery">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">{{ $gallery.title | default "Galerie d'images" }}</h3>
                        <div class="info-box-summary">{{ len $gallery.images }} image{{ if gt (len $gallery.images) 1 }}s{{ end }}</div>
                        {{ if $gallery.description }}
                        <div class="info-box-description">{{ $gallery.description }}</div>
                        {{ end }}
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="gallery-grid">
                        {{ range $gallery.images }}
                        <div class="gallery-item" onclick="openImageModal('{{ .url }}', '{{ .caption }}')">
                            <img src="{{ .url }}" alt="{{ .caption }}" loading="lazy">
                            <div class="gallery-overlay">
                                <div class="gallery-zoom-icon">
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                    </svg>
                                </div>
                            </div>
                            {{ if .caption }}
                            <div class="gallery-caption">{{ .caption }}</div>
                            {{ end }}
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Multiple YouTube Galleries Boxes -->
            {{ range $ytGalleryIndex, $ytGallery := .Params.youtube_galleries }}
            <div class="info-box youtube-box multiple-youtube-gallery-{{ $ytGalleryIndex }} {{ $ytGallery.size | default "size-large" }} expanded">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon youtube">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">{{ $ytGallery.title | default "Galerie de vid√©os YouTube" }}</h3>
                        <div class="info-box-summary">{{ len $ytGallery.videos }} vid√©o{{ if gt (len $ytGallery.videos) 1 }}s{{ end }}</div>
                        {{ if $ytGallery.description }}
                        <div class="info-box-description">{{ $ytGallery.description }}</div>
                        {{ end }}
                        <!-- Aper√ßu de la premi√®re vid√©o -->
                        {{ if $ytGallery.videos }}
                        {{ $firstVideo := index $ytGallery.videos 0 }}
                        <div class="youtube-preview" onclick="openYouTubeModal('{{ $firstVideo.video_id }}', '{{ $firstVideo.title }}'); event.stopPropagation();" data-video-id="{{ $firstVideo.video_id }}" data-video-title="{{ $firstVideo.title }}">
                            <div class="youtube-preview-thumbnail">
                                <img src="https://img.youtube.com/vi/{{ $firstVideo.video_id }}/mqdefault.jpg" alt="{{ $firstVideo.title }}">
                                <div class="youtube-preview-play"></div>
                            </div>
                            <div class="youtube-preview-info">
                                <div class="youtube-preview-title">{{ $firstVideo.title }}</div>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="youtube-list">
                        {{ range $ytGallery.videos }}
                        <div class="youtube-item" onclick="event.stopPropagation(); openYouTubeModal('{{ .video_id }}', '{{ .title }}')">
                            <div class="youtube-thumbnail">
                                <img src="https://img.youtube.com/vi/{{ .video_id }}/maxresdefault.jpg" alt="{{ .title }}">
                                <div class="youtube-play-button"></div>
                                {{ if .duration }}
                                <div class="youtube-duration">{{ .duration }}</div>
                                {{ end }}
                            </div>
                            <div class="youtube-info">
                                <h4 class="youtube-title">{{ .title }}</h4>
                                {{ if .description }}
                                <p class="youtube-description">{{ .description }}</p>
                                {{ end }}
                                <div class="youtube-meta">
                                    {{ if .date }}
                                    <div class="youtube-date">
                                        <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V8H19V19Z"/>
                                        </svg>
                                        {{ .date }}
                                    </div>
                                    {{ end }}
                                </div>
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}

            <!-- Multiple YouTube Singles Boxes -->
            {{ range $ytSingleIndex, $ytSingle := .Params.youtube_singles }}
            <div class="info-box youtube-single-box multiple-youtube-single-{{ $ytSingleIndex }} {{ $ytSingle.size | default "size-medium" }}">
                <div class="info-box-header" onclick="toggleInfoBox(this)">
                    <div class="info-box-icon youtube">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                        </svg>
                    </div>
                    <div class="info-box-header-content">
                        <h3 class="info-box-title">{{ $ytSingle.title | default "Vid√©o YouTube" }}</h3>
                        {{ if $ytSingle.description }}
                        <div class="info-box-description">{{ $ytSingle.description }}</div>
                        {{ end }}
                    </div>
                    <div class="info-box-toggle">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>
                        </svg>
                    </div>
                </div>
                <div class="info-box-content">
                    <div class="youtube-single-item" onclick="event.stopPropagation(); openYouTubeModal('{{ $ytSingle.video_id }}', '{{ $ytSingle.video_title }}')">
                        <div class="youtube-single-thumbnail">
                            <img src="https://img.youtube.com/vi/{{ $ytSingle.video_id }}/maxresdefault.jpg" alt="{{ $ytSingle.video_title }}">
                            <div class="youtube-single-play-button"></div>
                            {{ if $ytSingle.duration }}
                            <div class="youtube-single-duration">{{ $ytSingle.duration }}</div>
                            {{ end }}
                        </div>
                        <div class="youtube-single-info">
                            <h4 class="youtube-single-title">{{ $ytSingle.video_title }}</h4>
                            {{ if $ytSingle.video_description }}
                            <p class="youtube-single-description">{{ $ytSingle.video_description }}</p>
                            {{ end }}
                            <div class="youtube-single-meta">
                                {{ if $ytSingle.date }}
                                <div class="youtube-single-date">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V8H19V19Z"/>
                                    </svg>
                                    {{ $ytSingle.date }}
                                </div>
                                {{ end }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}

    </div>
</section>

<!-- Modal pour les vid√©os YouTube -->
<div id="youtubeModal" class="youtube-modal" onclick="closeYouTubeModal()">
    <div class="youtube-modal-content" onclick="event.stopPropagation()">
        <div class="youtube-modal-close" onclick="closeYouTubeModal()"></div>
        <div class="youtube-modal-loading">Chargement...</div>
        <iframe id="youtubeIframe" src="" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
        </iframe>
    </div>
</div>

{{ end }}

<!-- Project Content -->
<div class="hero-to-content-transition"></div>
<article class="project-detail">
    <div class="project-detail-wrapper">
        <!-- Main Content -->
        <div class="project-content">
            {{ .Content }}
            
            <!-- Navigation -->
            <nav class="project-navigation">
                <div class="nav-links">
                    {{ with .PrevInSection }}
                    <a href="{{ .Permalink }}" class="nav-link prev">
                        <span class="nav-direction">‚Üê Projet pr√©c√©dent</span>
                        <span class="nav-title">{{ .Title }}</span>
                    </a>
                    {{ end }}
                    
                    {{ with .NextInSection }}
                    <a href="{{ .Permalink }}" class="nav-link next">
                        <span class="nav-direction">Projet suivant ‚Üí</span>
                        <span class="nav-title">{{ .Title }}</span>
                    </a>
                    {{ end }}
                </div>
                
                <div class="back-to-projects">
                    <a href="/projects/" class="btn-secondary">‚Üê Retour aux projets</a>
                </div>
            </nav>
        </div>
        
        <!-- Sidebar with Notable Facts -->
        {{ if .Params.notable_facts }}
        <aside class="project-sidebar">
            <div class="notable-facts">
                <h3 class="notable-facts-title">Faits notables</h3>
                {{ range .Params.notable_facts }}
                <div class="fact-card">
                    <div class="fact-icon {{ .type }}">{{ .icon }}</div>
                    <div class="fact-value">{{ .value | safeHTML }}</div>
                    <div class="fact-label">{{ .label }}</div>
                </div>
                {{ end }}
            </div>
        </aside>
        {{ end }}
    </div>
</article>

<!-- Image Modal for Gallery -->
<div id="imageModal" class="image-modal" onclick="closeImageModal()">
    <div class="image-modal-content">
        <span class="image-modal-close" onclick="closeImageModal()">&times;</span>
        <img id="modalImage" src="" alt="">
        <div id="modalCaption" class="image-modal-caption"></div>
    </div>
</div>

<script>
function showMoreActions(button) {
    const popup = button.nextElementSibling;
    if (popup && popup.classList.contains('actions-popup')) {
        popup.style.display = 'block';
        setTimeout(() => popup.classList.add('active'), 10);
    }
}

function hideMoreActions(element) {
    const popup = element.closest('.actions-popup');
    if (popup) {
        popup.classList.remove('active');
        setTimeout(() => popup.style.display = 'none', 300);
    }
}

function initializeInfoBoxSystem() {
    const infoBoxes = document.querySelectorAll('.info-box');
    
    infoBoxes.forEach(function(infoBox) {
        // Stocker la taille originale de chaque widget
        const computedStyle = window.getComputedStyle(infoBox);
        const gridColumn = computedStyle.gridColumn;
        
        infoBox.setAttribute('data-original-span', gridColumn);
        infoBox.style.setProperty('--original-span', gridColumn);
        
        // Ajouter des gestionnaires d'√©v√©nements pour les transitions
        infoBox.addEventListener('transitionstart', function(e) {
            if (e.propertyName === 'grid-column') {
                // Marquer le d√©but de la transition de grille
                infoBox.classList.add('transitioning');
            }
        });
        
        infoBox.addEventListener('transitionend', function(e) {
            if (e.propertyName === 'grid-column') {
                // Marquer la fin de la transition de grille
                infoBox.classList.remove('transitioning');
            }
        });
        
        // Optimisation pour les performances : observer les changements de taille
        if (window.ResizeObserver) {
            const resizeObserver = new ResizeObserver(function(entries) {
                entries.forEach(function(entry) {
                    // Assurer que le widget maintient ses proportions
                    if (entry.target.classList.contains('expanded')) {
                        entry.target.style.minHeight = 'auto';
                    }
                });
            });
            
            resizeObserver.observe(infoBox);
        }
    });
    
    // Gestionnaire global pour √©viter les conflits entre widgets
    let currentlyExpanding = null;
    
    window.addEventListener('click', function(e) {
        const header = e.target.closest('.info-box-header');
        if (header && currentlyExpanding === null) {
            const infoBox = header.closest('.info-box');
            if (infoBox.classList.contains('expanding') || infoBox.classList.contains('collapsing')) {
                return; // Ignorer si d√©j√† en cours d'animation
            }
            
            currentlyExpanding = infoBox;
            setTimeout(() => {
                currentlyExpanding = null;
            }, 500); // D√©lai de s√©curit√© pour √©viter les clics rapides
        }
    });
}

function toggleInfoBox(header) {
    const infoBox = header.closest('.info-box');
    const isExpanded = infoBox.classList.contains('expanded');
    
    // V√©rifier si une animation est d√©j√† en cours
    if (infoBox.classList.contains('expanding') || infoBox.classList.contains('collapsing')) {
        return;
    }
    
    // Stocker la taille originale si ce n'est pas d√©j√† fait
    if (!infoBox.hasAttribute('data-original-span')) {
        const computedStyle = window.getComputedStyle(infoBox);
        const gridColumn = computedStyle.gridColumn;
        infoBox.setAttribute('data-original-span', gridColumn);
        infoBox.style.setProperty('--original-span', gridColumn);
    }
    
    if (isExpanded) {
        // Fermeture avec animation
        infoBox.classList.add('collapsing');
        infoBox.classList.remove('expanded');
        
        // Scroll vers le widget qui se ferme AVANT qu'il se ferme compl√®tement
        setTimeout(() => {
            infoBox.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center',
                inline: 'nearest'
            });
        }, 50); // Scroll presque imm√©diatement
        
        // Retirer la classe d'animation apr√®s l'animation
        setTimeout(() => {
            infoBox.classList.remove('collapsing');
        }, 300);
    } else {
        // Ouverture avec animation
        infoBox.classList.add('expanding');
        infoBox.classList.add('expanded');
        
        // Retirer la classe d'animation apr√®s l'animation
        setTimeout(() => {
            infoBox.classList.remove('expanding');
        }, 400);
        
        // Scroll vers le widget ouvert APR√àS qu'il commence √† s'ouvrir
        setTimeout(() => {
            infoBox.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center',
                inline: 'nearest'
            });
        }, 200);
    }
}

function openImageModal(imageUrl, caption) {
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const modalCaption = document.getElementById('modalCaption');
    
    modalImage.src = imageUrl;
    modalCaption.textContent = caption || '';
    modal.style.display = 'flex';
    
    // Prevent body scroll
    document.body.style.overflow = 'hidden';
    
    // Add animation
    setTimeout(() => modal.classList.add('active'), 10);
}

function closeImageModal() {
    const modal = document.getElementById('imageModal');
    modal.classList.remove('active');
    
    setTimeout(() => {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
    }, 300);
}

// Close modal with Escape key
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        closeImageModal();
    }
});

// Enhanced blur transition effect
document.addEventListener('DOMContentLoaded', function() {
    const body = document.body;
    const transition = document.querySelector('.hero-to-content-transition');
    
    // Initialisation du syst√®me de widgets am√©lior√©
    initializeInfoBoxSystem();
    
    // Smart gallery slideshow with preloading
    const galleryBoxes = document.querySelectorAll('.gallery-box:not(.expanded)');
    
    galleryBoxes.forEach(function(galleryBox) {
        const galleryImages = galleryBox.querySelectorAll('.gallery-background .gallery-mini-item img');
        const imageUrls = Array.from(galleryImages).map(img => img.src);
        
        if (imageUrls.length <= 1) return; // Pas de slideshow pour une seule image
        
        let currentIndex = 0;
        let preloadedImages = [];
        let isPreloaded = false;
        
        // Pr√©charger toutes les images
        function preloadImages() {
            let loadedCount = 0;
            
            imageUrls.forEach(function(url, index) {
                const img = new Image();
                img.onload = function() {
                    preloadedImages[index] = true;
                    loadedCount++;
                    
                    // Toutes les images sont charg√©es
                    if (loadedCount === imageUrls.length) {
                        isPreloaded = true;
                        startSlideshow();
                    }
                };
                img.src = url;
            });
        }
        
        // D√©marrer le slideshow seulement quand toutes les images sont pr√™tes
        function startSlideshow() {
            // Masquer toutes les images sauf la premi√®re
            galleryImages.forEach(function(img, index) {
                img.parentElement.style.opacity = index === 0 ? '1' : '0';
            });
            
            // Changer d'image toutes les 4 secondes
            setInterval(function() {
                if (galleryBox.classList.contains('expanded')) return; // Arr√™ter si ouvert
                
                const currentImg = galleryImages[currentIndex];
                const nextIndex = (currentIndex + 1) % galleryImages.length;
                const nextImg = galleryImages[nextIndex];
                
                // Cr√©er une nouvelle image pour s'assurer qu'elle est charg√©e
                const preloadImg = new Image();
                preloadImg.onload = function() {
                    // L'image suivante est pr√™te, faire la transition
                    currentImg.parentElement.style.transition = 'opacity 1s ease-in-out';
                    nextImg.parentElement.style.transition = 'opacity 1s ease-in-out';
                    
                    currentImg.parentElement.style.opacity = '0';
                    nextImg.parentElement.style.opacity = '1';
                    
                    // Mettre √† jour l'index seulement apr√®s la transition
                    currentIndex = nextIndex;
                };
                preloadImg.src = nextImg.src;
            }, 4000);
        }
        
        // Commencer le pr√©chargement
        preloadImages();
    });
    
    // Trigger blur animation after page load
    setTimeout(() => {
        body.classList.add('blur-animated');
    }, 300);
    
    // Smooth scroll-based blur intensity adjustment
    let ticking = false;
    
    function updateBlur() {
        const scrollY = window.pageYOffset;
        const heroHeight = document.querySelector('.project-hero').offsetHeight;
        const maxScroll = heroHeight * 0.8;
        
        // Calculate blur intensity based on scroll position
        const blurProgress = Math.min(scrollY / maxScroll, 1);
        const blurValue = 8 + (blurProgress * 4); // 8px to 12px
        
        document.documentElement.style.setProperty('--blur-intensity', `${blurValue}px`);
        ticking = false;
    }
    
    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(updateBlur);
            ticking = true;
        }
    }
    
    window.addEventListener('scroll', requestTick, { passive: true });
    
    // Initial call
    updateBlur();
});
</script>

<!-- Technical Specifications Enhancement Script -->
{{ $techSpecsJs := resources.Get "js/technical-specs.js" }}
{{ if $techSpecsJs }}
<script>{{ $techSpecsJs.Content | safeJS }}</script>
{{ end }}

<!-- Auto-include person modal if needed -->
{{ partial "auto-person-modal.html" . }}

<!-- Include skill modal for specialties and tools -->
{{ partial "skill-modal.html" . }}
{{ end }}
